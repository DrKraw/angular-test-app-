"use strict";
/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
var Zone = (function (global) {
    var performance = global['performance'];
    function mark(name) { performance && performance['mark'] && performance['mark'](name); }
    function performanceMeasure(name, label) {
        performance && performance['measure'] && performance['measure'](name, label);
    }
    mark('Zone');
    // Initialize before it's accessed below.
    // __Zone_symbol_prefix global can be used to override the default zone
    // symbol prefix with a custom one if needed.
    var symbolPrefix = global['__Zone_symbol_prefix'] || '__zone_symbol__';
    function __symbol__(name) { return symbolPrefix + name; }
    var checkDuplicate = global[__symbol__('forceDuplicateZoneCheck')] === true;
    if (global['Zone']) {
        // if global['Zone'] already exists (maybe zone.js was already loaded or
        // some other lib also registered a global object named Zone), we may need
        // to throw an error, but sometimes user may not want this error.
        // For example,
        // we have two web pages, page1 includes zone.js, page2 doesn't.
        // and the 1st time user load page1 and page2, everything work fine,
        // but when user load page2 again, error occurs because global['Zone'] already exists.
        // so we add a flag to let user choose whether to throw this error or not.
        // By default, if existing Zone is from zone.js, we will not throw the error.
        if (checkDuplicate || typeof global['Zone'].__symbol__ !== 'function') {
            throw new Error('Zone already loaded.');
        }
        else {
            return global['Zone'];
        }
    }
    var Zone = /** @class */ (function () {
        function Zone(parent, zoneSpec) {
            this._parent = parent;
            this._name = zoneSpec ? zoneSpec.name || 'unnamed' : '<root>';
            this._properties = zoneSpec && zoneSpec.properties || {};
            this._zoneDelegate =
                new ZoneDelegate(this, this._parent && this._parent._zoneDelegate, zoneSpec);
        }
        Zone.assertZonePatched = function () {
            if (global['Promise'] !== patches['ZoneAwarePromise']) {
                throw new Error('Zone.js has detected that ZoneAwarePromise `(window|global).Promise` ' +
                    'has been overwritten.\n' +
                    'Most likely cause is that a Promise polyfill has been loaded ' +
                    'after Zone.js (Polyfilling Promise api is not necessary when zone.js is loaded. ' +
                    'If you must load one, do so before loading zone.js.)');
            }
        };
        Object.defineProperty(Zone, "root", {
            get: function () {
                var zone = Zone.current;
                while (zone.parent) {
                    zone = zone.parent;
                }
                return zone;
            },
            enumerable: true,
            configurable: true
        });
        Object.defineProperty(Zone, "current", {
            get: function () { return _currentZoneFrame.zone; },
            enumerable: true,
            configurable: true
        });
        Object.defineProperty(Zone, "currentTask", {
            get: function () { return _currentTask; },
            enumerable: true,
            configurable: true
        });
        Zone.__load_patch = function (name, fn) {
            if (patches.hasOwnProperty(name)) {
                if (checkDuplicate) {
                    throw Error('Already loaded patch: ' + name);
                }
            }
            else if (!global['__Zone_disable_' + name]) {
                var perfName = 'Zone:' + name;
                mark(perfName);
                patches[name] = fn(global, Zone, _api);
                performanceMeasure(perfName, perfName);
            }
        };
        Object.defineProperty(Zone.prototype, "parent", {
            get: function () { return this._parent; },
            enumerable: true,
            configurable: true
        });
        Object.defineProperty(Zone.prototype, "name", {
            get: function () { return this._name; },
            enumerable: true,
            configurable: true
        });
        Zone.prototype.get = function (key) {
            var zone = this.getZoneWith(key);
            if (zone)
                return zone._properties[key];
        };
        Zone.prototype.getZoneWith = function (key) {
            var current = this;
            while (current) {
                if (current._properties.hasOwnProperty(key)) {
                    return current;
                }
                current = current._parent;
            }
            return null;
        };
        Zone.prototype.fork = function (zoneSpec) {
            if (!zoneSpec)
                throw new Error('ZoneSpec required!');
            return this._zoneDelegate.fork(this, zoneSpec);
        };
        Zone.prototype.wrap = function (callback, source) {
            if (typeof callback !== 'function') {
                throw new Error('Expecting function got: ' + callback);
            }
            var _callback = this._zoneDelegate.intercept(this, callback, source);
            var zone = this;
            return function () {
                return zone.runGuarded(_callback, this, arguments, source);
            };
        };
        Zone.prototype.run = function (callback, applyThis, applyArgs, source) {
            _currentZoneFrame = { parent: _currentZoneFrame, zone: this };
            try {
                return this._zoneDelegate.invoke(this, callback, applyThis, applyArgs, source);
            }
            finally {
                _currentZoneFrame = _currentZoneFrame.parent;
            }
        };
        Zone.prototype.runGuarded = function (callback, applyThis, applyArgs, source) {
            if (applyThis === void 0) { applyThis = null; }
            _currentZoneFrame = { parent: _currentZoneFrame, zone: this };
            try {
                try {
                    return this._zoneDelegate.invoke(this, callback, applyThis, applyArgs, source);
                }
                catch (error) {
                    if (this._zoneDelegate.handleError(this, error)) {
                        throw error;
                    }
                }
            }
            finally {
                _currentZoneFrame = _currentZoneFrame.parent;
            }
        };
        Zone.prototype.runTask = function (task, applyThis, applyArgs) {
            if (task.zone != this) {
                throw new Error('A task can only be run in the zone of creation! (Creation: ' +
                    (task.zone || NO_ZONE).name + '; Execution: ' + this.name + ')');
            }
            // https://github.com/angular/zone.js/issues/778, sometimes eventTask
            // will run in notScheduled(canceled) state, we should not try to
            // run such kind of task but just return
            if (task.state === notScheduled && (task.type === eventTask || task.type === macroTask)) {
                return;
            }
            var reEntryGuard = task.state != running;
            reEntryGuard && task._transitionTo(running, scheduled);
            task.runCount++;
            var previousTask = _currentTask;
            _currentTask = task;
            _currentZoneFrame = { parent: _currentZoneFrame, zone: this };
            try {
                if (task.type == macroTask && task.data && !task.data.isPeriodic) {
                    task.cancelFn = undefined;
                }
                try {
                    return this._zoneDelegate.invokeTask(this, task, applyThis, applyArgs);
                }
                catch (error) {
                    if (this._zoneDelegate.handleError(this, error)) {
                        throw error;
                    }
                }
            }
            finally {
                // if the task's state is notScheduled or unknown, then it has already been cancelled
                // we should not reset the state to scheduled
                if (task.state !== notScheduled && task.state !== unknown) {
                    if (task.type == eventTask || (task.data && task.data.isPeriodic)) {
                        reEntryGuard && task._transitionTo(scheduled, running);
                    }
                    else {
                        task.runCount = 0;
                        this._updateTaskCount(task, -1);
                        reEntryGuard &&
                            task._transitionTo(notScheduled, running, notScheduled);
                    }
                }
                _currentZoneFrame = _currentZoneFrame.parent;
                _currentTask = previousTask;
            }
        };
        Zone.prototype.scheduleTask = function (task) {
            if (task.zone && task.zone !== this) {
                // check if the task was rescheduled, the newZone
                // should not be the children of the original zone
                var newZone = this;
                while (newZone) {
                    if (newZone === task.zone) {
                        throw Error("can not reschedule task to " + this.name + " which is descendants of the original zone " + task.zone.name);
                    }
                    newZone = newZone.parent;
                }
            }
            task._transitionTo(scheduling, notScheduled);
            var zoneDelegates = [];
            task._zoneDelegates = zoneDelegates;
            task._zone = this;
            try {
                task = this._zoneDelegate.scheduleTask(this, task);
            }
            catch (err) {
                // should set task's state to unknown when scheduleTask throw error
                // because the err may from reschedule, so the fromState maybe notScheduled
                task._transitionTo(unknown, scheduling, notScheduled);
                // TODO: @JiaLiPassion, should we check the result from handleError?
                this._zoneDelegate.handleError(this, err);
                throw err;
            }
            if (task._zoneDelegates === zoneDelegates) {
                // we have to check because internally the delegate can reschedule the task.
                this._updateTaskCount(task, 1);
            }
            if (task.state == scheduling) {
                task._transitionTo(scheduled, scheduling);
            }
            return task;
        };
        Zone.prototype.scheduleMicroTask = function (source, callback, data, customSchedule) {
            return this.scheduleTask(new ZoneTask(microTask, source, callback, data, customSchedule, undefined));
        };
        Zone.prototype.scheduleMacroTask = function (source, callback, data, customSchedule, customCancel) {
            return this.scheduleTask(new ZoneTask(macroTask, source, callback, data, customSchedule, customCancel));
        };
        Zone.prototype.scheduleEventTask = function (source, callback, data, customSchedule, customCancel) {
            return this.scheduleTask(new ZoneTask(eventTask, source, callback, data, customSchedule, customCancel));
        };
        Zone.prototype.cancelTask = function (task) {
            if (task.zone != this)
                throw new Error('A task can only be cancelled in the zone of creation! (Creation: ' +
                    (task.zone || NO_ZONE).name + '; Execution: ' + this.name + ')');
            task._transitionTo(canceling, scheduled, running);
            try {
                this._zoneDelegate.cancelTask(this, task);
            }
            catch (err) {
                // if error occurs when cancelTask, transit the state to unknown
                task._transitionTo(unknown, canceling);
                this._zoneDelegate.handleError(this, err);
                throw err;
            }
            this._updateTaskCount(task, -1);
            task._transitionTo(notScheduled, canceling);
            task.runCount = 0;
            return task;
        };
        Zone.prototype._updateTaskCount = function (task, count) {
            var zoneDelegates = task._zoneDelegates;
            if (count == -1) {
                task._zoneDelegates = null;
            }
            for (var i = 0; i < zoneDelegates.length; i++) {
                zoneDelegates[i]._updateTaskCount(task.type, count);
            }
        };
        Zone.__symbol__ = __symbol__;
        return Zone;
    }());
    var DELEGATE_ZS = {
        name: '',
        onHasTask: function (delegate, _, target, hasTaskState) { return delegate.hasTask(target, hasTaskState); },
        onScheduleTask: function (delegate, _, target, task) { return delegate.scheduleTask(target, task); },
        onInvokeTask: function (delegate, _, target, task, applyThis, applyArgs) {
            return delegate.invokeTask(target, task, applyThis, applyArgs);
        },
        onCancelTask: function (delegate, _, target, task) { return delegate.cancelTask(target, task); }
    };
    var ZoneDelegate = /** @class */ (function () {
        function ZoneDelegate(zone, parentDelegate, zoneSpec) {
            this._taskCounts = { 'microTask': 0, 'macroTask': 0, 'eventTask': 0 };
            this.zone = zone;
            this._parentDelegate = parentDelegate;
            this._forkZS =
                zoneSpec && (zoneSpec && zoneSpec.onFork ? zoneSpec : parentDelegate._forkZS);
            this._forkDlgt = zoneSpec && (zoneSpec.onFork ? parentDelegate : parentDelegate._forkDlgt);
            this._forkCurrZone =
                zoneSpec && (zoneSpec.onFork ? this.zone : parentDelegate._forkCurrZone);
            this._interceptZS =
                zoneSpec && (zoneSpec.onIntercept ? zoneSpec : parentDelegate._interceptZS);
            this._interceptDlgt =
                zoneSpec && (zoneSpec.onIntercept ? parentDelegate : parentDelegate._interceptDlgt);
            this._interceptCurrZone =
                zoneSpec && (zoneSpec.onIntercept ? this.zone : parentDelegate._interceptCurrZone);
            this._invokeZS = zoneSpec && (zoneSpec.onInvoke ? zoneSpec : parentDelegate._invokeZS);
            this._invokeDlgt =
                zoneSpec && (zoneSpec.onInvoke ? parentDelegate : parentDelegate._invokeDlgt);
            this._invokeCurrZone =
                zoneSpec && (zoneSpec.onInvoke ? this.zone : parentDelegate._invokeCurrZone);
            this._handleErrorZS =
                zoneSpec && (zoneSpec.onHandleError ? zoneSpec : parentDelegate._handleErrorZS);
            this._handleErrorDlgt = zoneSpec &&
                (zoneSpec.onHandleError ? parentDelegate : parentDelegate._handleErrorDlgt);
            this._handleErrorCurrZone =
                zoneSpec && (zoneSpec.onHandleError ? this.zone : parentDelegate._handleErrorCurrZone);
            this._scheduleTaskZS =
                zoneSpec && (zoneSpec.onScheduleTask ? zoneSpec : parentDelegate._scheduleTaskZS);
            this._scheduleTaskDlgt = zoneSpec &&
                (zoneSpec.onScheduleTask ? parentDelegate : parentDelegate._scheduleTaskDlgt);
            this._scheduleTaskCurrZone = zoneSpec &&
                (zoneSpec.onScheduleTask ? this.zone : parentDelegate._scheduleTaskCurrZone);
            this._invokeTaskZS =
                zoneSpec && (zoneSpec.onInvokeTask ? zoneSpec : parentDelegate._invokeTaskZS);
            this._invokeTaskDlgt =
                zoneSpec && (zoneSpec.onInvokeTask ? parentDelegate : parentDelegate._invokeTaskDlgt);
            this._invokeTaskCurrZone =
                zoneSpec && (zoneSpec.onInvokeTask ? this.zone : parentDelegate._invokeTaskCurrZone);
            this._cancelTaskZS =
                zoneSpec && (zoneSpec.onCancelTask ? zoneSpec : parentDelegate._cancelTaskZS);
            this._cancelTaskDlgt =
                zoneSpec && (zoneSpec.onCancelTask ? parentDelegate : parentDelegate._cancelTaskDlgt);
            this._cancelTaskCurrZone =
                zoneSpec && (zoneSpec.onCancelTask ? this.zone : parentDelegate._cancelTaskCurrZone);
            this._hasTaskZS = null;
            this._hasTaskDlgt = null;
            this._hasTaskDlgtOwner = null;
            this._hasTaskCurrZone = null;
            var zoneSpecHasTask = zoneSpec && zoneSpec.onHasTask;
            var parentHasTask = parentDelegate && parentDelegate._hasTaskZS;
            if (zoneSpecHasTask || parentHasTask) {
                // If we need to report hasTask, than this ZS needs to do ref counting on tasks. In such
                // a case all task related interceptors must go through this ZD. We can't short circuit it.
                this._hasTaskZS = zoneSpecHasTask ? zoneSpec : DELEGATE_ZS;
                this._hasTaskDlgt = parentDelegate;
                this._hasTaskDlgtOwner = this;
                this._hasTaskCurrZone = zone;
                if (!zoneSpec.onScheduleTask) {
                    this._scheduleTaskZS = DELEGATE_ZS;
                    this._scheduleTaskDlgt = parentDelegate;
                    this._scheduleTaskCurrZone = this.zone;
                }
                if (!zoneSpec.onInvokeTask) {
                    this._invokeTaskZS = DELEGATE_ZS;
                    this._invokeTaskDlgt = parentDelegate;
                    this._invokeTaskCurrZone = this.zone;
                }
                if (!zoneSpec.onCancelTask) {
                    this._cancelTaskZS = DELEGATE_ZS;
                    this._cancelTaskDlgt = parentDelegate;
                    this._cancelTaskCurrZone = this.zone;
                }
            }
        }
        ZoneDelegate.prototype.fork = function (targetZone, zoneSpec) {
            return this._forkZS ?
                this._forkZS.onFork(this._forkDlgt, this.zone, targetZone, zoneSpec) :
                new Zone(targetZone, zoneSpec);
        };
        ZoneDelegate.prototype.intercept = function (targetZone, callback, source) {
            return this._interceptZS ?
                this._interceptZS.onIntercept(this._interceptDlgt, this._interceptCurrZone, targetZone, callback, source) :
                callback;
        };
        ZoneDelegate.prototype.invoke = function (targetZone, callback, applyThis, applyArgs, source) {
            return this._invokeZS ?
                this._invokeZS.onInvoke(this._invokeDlgt, this._invokeCurrZone, targetZone, callback, applyThis, applyArgs, source) :
                callback.apply(applyThis, applyArgs);
        };
        ZoneDelegate.prototype.handleError = function (targetZone, error) {
            return this._handleErrorZS ?
                this._handleErrorZS.onHandleError(this._handleErrorDlgt, this._handleErrorCurrZone, targetZone, error) :
                true;
        };
        ZoneDelegate.prototype.scheduleTask = function (targetZone, task) {
            var returnTask = task;
            if (this._scheduleTaskZS) {
                if (this._hasTaskZS) {
                    returnTask._zoneDelegates.push(this._hasTaskDlgtOwner);
                }
                // clang-format off
                returnTask = this._scheduleTaskZS.onScheduleTask(this._scheduleTaskDlgt, this._scheduleTaskCurrZone, targetZone, task);
                // clang-format on
                if (!returnTask)
                    returnTask = task;
            }
            else {
                if (task.scheduleFn) {
                    task.scheduleFn(task);
                }
                else if (task.type == microTask) {
                    scheduleMicroTask(task);
                }
                else {
                    throw new Error('Task is missing scheduleFn.');
                }
            }
            return returnTask;
        };
        ZoneDelegate.prototype.invokeTask = function (targetZone, task, applyThis, applyArgs) {
            return this._invokeTaskZS ?
                this._invokeTaskZS.onInvokeTask(this._invokeTaskDlgt, this._invokeTaskCurrZone, targetZone, task, applyThis, applyArgs) :
                task.callback.apply(applyThis, applyArgs);
        };
        ZoneDelegate.prototype.cancelTask = function (targetZone, task) {
            var value;
            if (this._cancelTaskZS) {
                value = this._cancelTaskZS.onCancelTask(this._cancelTaskDlgt, this._cancelTaskCurrZone, targetZone, task);
            }
            else {
                if (!task.cancelFn) {
                    throw Error('Task is not cancelable');
                }
                value = task.cancelFn(task);
            }
            return value;
        };
        ZoneDelegate.prototype.hasTask = function (targetZone, isEmpty) {
            // hasTask should not throw error so other ZoneDelegate
            // can still trigger hasTask callback
            try {
                this._hasTaskZS &&
                    this._hasTaskZS.onHasTask(this._hasTaskDlgt, this._hasTaskCurrZone, targetZone, isEmpty);
            }
            catch (err) {
                this.handleError(targetZone, err);
            }
        };
        ZoneDelegate.prototype._updateTaskCount = function (type, count) {
            var counts = this._taskCounts;
            var prev = counts[type];
            var next = counts[type] = prev + count;
            if (next < 0) {
                throw new Error('More tasks executed then were scheduled.');
            }
            if (prev == 0 || next == 0) {
                var isEmpty = {
                    microTask: counts['microTask'] > 0,
                    macroTask: counts['macroTask'] > 0,
                    eventTask: counts['eventTask'] > 0,
                    change: type
                };
                this.hasTask(this.zone, isEmpty);
            }
        };
        return ZoneDelegate;
    }());
    var ZoneTask = /** @class */ (function () {
        function ZoneTask(type, source, callback, options, scheduleFn, cancelFn) {
            this._zone = null;
            this.runCount = 0;
            this._zoneDelegates = null;
            this._state = 'notScheduled';
            this.type = type;
            this.source = source;
            this.data = options;
            this.scheduleFn = scheduleFn;
            this.cancelFn = cancelFn;
            if (!callback) {
                throw new Error('callback is not defined');
            }
            this.callback = callback;
            var self = this;
            // TODO: @JiaLiPassion options should have interface
            if (type === eventTask && options && options.useG) {
                this.invoke = ZoneTask.invokeTask;
            }
            else {
                this.invoke = function () {
                    return ZoneTask.invokeTask.call(global, self, this, arguments);
                };
            }
        }
        ZoneTask.invokeTask = function (task, target, args) {
            if (!task) {
                task = this;
            }
            _numberOfNestedTaskFrames++;
            try {
                task.runCount++;
                return task.zone.runTask(task, target, args);
            }
            finally {
                if (_numberOfNestedTaskFrames == 1) {
                    drainMicroTaskQueue();
                }
                _numberOfNestedTaskFrames--;
            }
        };
        Object.defineProperty(ZoneTask.prototype, "zone", {
            get: function () { return this._zone; },
            enumerable: true,
            configurable: true
        });
        Object.defineProperty(ZoneTask.prototype, "state", {
            get: function () { return this._state; },
            enumerable: true,
            configurable: true
        });
        ZoneTask.prototype.cancelScheduleRequest = function () { this._transitionTo(notScheduled, scheduling); };
        ZoneTask.prototype._transitionTo = function (toState, fromState1, fromState2) {
            if (this._state === fromState1 || this._state === fromState2) {
                this._state = toState;
                if (toState == notScheduled) {
                    this._zoneDelegates = null;
                }
            }
            else {
                throw new Error(this.type + " '" + this.source + "': can not transition to '" + toState + "', expecting state '" + fromState1 + "'" + (fromState2 ? ' or \'' + fromState2 + '\'' : '') + ", was '" + this._state + "'.");
            }
        };
        ZoneTask.prototype.toString = function () {
            if (this.data && typeof this.data.handleId !== 'undefined') {
                return this.data.handleId.toString();
            }
            else {
                return Object.prototype.toString.call(this);
            }
        };
        // add toJSON method to prevent cyclic error when
        // call JSON.stringify(zoneTask)
        ZoneTask.prototype.toJSON = function () {
            return {
                type: this.type,
                state: this.state,
                source: this.source,
                zone: this.zone.name,
                runCount: this.runCount
            };
        };
        return ZoneTask;
    }());
    //////////////////////////////////////////////////////
    //////////////////////////////////////////////////////
    ///  MICROTASK QUEUE
    //////////////////////////////////////////////////////
    //////////////////////////////////////////////////////
    var symbolSetTimeout = __symbol__('setTimeout');
    var symbolPromise = __symbol__('Promise');
    var symbolThen = __symbol__('then');
    var _microTaskQueue = [];
    var _isDrainingMicrotaskQueue = false;
    var nativeMicroTaskQueuePromise;
    function scheduleMicroTask(task) {
        // if we are not running in any task, and there has not been anything scheduled
        // we must bootstrap the initial task creation by manually scheduling the drain
        if (_numberOfNestedTaskFrames === 0 && _microTaskQueue.length === 0) {
            // We are not running in Task, so we need to kickstart the microtask queue.
            if (!nativeMicroTaskQueuePromise) {
                if (global[symbolPromise]) {
                    nativeMicroTaskQueuePromise = global[symbolPromise].resolve(0);
                }
            }
            if (nativeMicroTaskQueuePromise) {
                var nativeThen = nativeMicroTaskQueuePromise[symbolThen];
                if (!nativeThen) {
                    // native Promise is not patchable, we need to use `then` directly
                    // issue 1078
                    nativeThen = nativeMicroTaskQueuePromise['then'];
                }
                nativeThen.call(nativeMicroTaskQueuePromise, drainMicroTaskQueue);
            }
            else {
                global[symbolSetTimeout](drainMicroTaskQueue, 0);
            }
        }
        task && _microTaskQueue.push(task);
    }
    function drainMicroTaskQueue() {
        if (!_isDrainingMicrotaskQueue) {
            _isDrainingMicrotaskQueue = true;
            while (_microTaskQueue.length) {
                var queue = _microTaskQueue;
                _microTaskQueue = [];
                for (var i = 0; i < queue.length; i++) {
                    var task = queue[i];
                    try {
                        task.zone.runTask(task, null, null);
                    }
                    catch (error) {
                        _api.onUnhandledError(error);
                    }
                }
            }
            _api.microtaskDrainDone();
            _isDrainingMicrotaskQueue = false;
        }
    }
    //////////////////////////////////////////////////////
    //////////////////////////////////////////////////////
    ///  BOOTSTRAP
    //////////////////////////////////////////////////////
    //////////////////////////////////////////////////////
    var NO_ZONE = { name: 'NO ZONE' };
    var notScheduled = 'notScheduled', scheduling = 'scheduling', scheduled = 'scheduled', running = 'running', canceling = 'canceling', unknown = 'unknown';
    var microTask = 'microTask', macroTask = 'macroTask', eventTask = 'eventTask';
    var patches = {};
    var _api = {
        symbol: __symbol__,
        currentZoneFrame: function () { return _currentZoneFrame; },
        onUnhandledError: noop,
        microtaskDrainDone: noop,
        scheduleMicroTask: scheduleMicroTask,
        showUncaughtError: function () { return !Zone[__symbol__('ignoreConsoleErrorUncaughtError')]; },
        patchEventTarget: function () { return []; },
        patchOnProperties: noop,
        patchMethod: function () { return noop; },
        bindArguments: function () { return []; },
        patchThen: function () { return noop; },
        patchMacroTask: function () { return noop; },
        setNativePromise: function (NativePromise) {
            // sometimes NativePromise.resolve static function
            // is not ready yet, (such as core-js/es6.promise)
            // so we need to check here.
            if (NativePromise && typeof NativePromise.resolve === 'function') {
                nativeMicroTaskQueuePromise = NativePromise.resolve(0);
            }
        },
        patchEventPrototype: function () { return noop; },
        isIEOrEdge: function () { return false; },
        getGlobalObjects: function () { return undefined; },
        ObjectDefineProperty: function () { return noop; },
        ObjectGetOwnPropertyDescriptor: function () { return undefined; },
        ObjectCreate: function () { return undefined; },
        ArraySlice: function () { return []; },
        patchClass: function () { return noop; },
        wrapWithCurrentZone: function () { return noop; },
        filterProperties: function () { return []; },
        attachOriginToPatched: function () { return noop; },
        _redefineProperty: function () { return noop; },
        patchCallbacks: function () { return noop; }
    };
    var _currentZoneFrame = { parent: null, zone: new Zone(null, null) };
    var _currentTask = null;
    var _numberOfNestedTaskFrames = 0;
    function noop() { }
    performanceMeasure('Zone', 'Zone');
    return global['Zone'] = Zone;
})(typeof window !== 'undefined' && window || typeof self !== 'undefined' && self || global);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiem9uZS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uLy4uL3BhY2thZ2VzL3pvbmUuanMvbGliL3pvbmUudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBOzs7Ozs7R0FNRztBQXdwQkgsSUFBTSxJQUFJLEdBQWEsQ0FBQyxVQUFTLE1BQVc7SUFDMUMsSUFBTSxXQUFXLEdBQ2IsTUFBTSxDQUFDLGFBQWEsQ0FBQyxDQUFDO0lBQzFCLFNBQVMsSUFBSSxDQUFDLElBQVksSUFBSSxXQUFXLElBQUksV0FBVyxDQUFDLE1BQU0sQ0FBQyxJQUFJLFdBQVcsQ0FBQyxNQUFNLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUM7SUFDaEcsU0FBUyxrQkFBa0IsQ0FBQyxJQUFZLEVBQUUsS0FBYTtRQUNyRCxXQUFXLElBQUksV0FBVyxDQUFDLFNBQVMsQ0FBQyxJQUFJLFdBQVcsQ0FBQyxTQUFTLENBQUMsQ0FBQyxJQUFJLEVBQUUsS0FBSyxDQUFDLENBQUM7SUFDL0UsQ0FBQztJQUNELElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQztJQUViLHlDQUF5QztJQUN6Qyx1RUFBdUU7SUFDdkUsNkNBQTZDO0lBQzdDLElBQU0sWUFBWSxHQUFHLE1BQU0sQ0FBQyxzQkFBc0IsQ0FBQyxJQUFJLGlCQUFpQixDQUFDO0lBRXpFLFNBQVMsVUFBVSxDQUFDLElBQVksSUFBSSxPQUFPLFlBQVksR0FBRyxJQUFJLENBQUMsQ0FBQyxDQUFDO0lBRWpFLElBQU0sY0FBYyxHQUFHLE1BQU0sQ0FBQyxVQUFVLENBQUMseUJBQXlCLENBQUMsQ0FBQyxLQUFLLElBQUksQ0FBQztJQUM5RSxJQUFJLE1BQU0sQ0FBQyxNQUFNLENBQUMsRUFBRTtRQUNsQix3RUFBd0U7UUFDeEUsMEVBQTBFO1FBQzFFLGlFQUFpRTtRQUNqRSxlQUFlO1FBQ2YsZ0VBQWdFO1FBQ2hFLG9FQUFvRTtRQUNwRSxzRkFBc0Y7UUFDdEYsMEVBQTBFO1FBQzFFLDZFQUE2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QUFJLGlCQUFpQixHQUFlLEVBQUMsTUFBTSxFQUFFLElBQUksRUFBRSxJQUFJLEVBQUUsSUFBSSxJQUFJLENBQUMsSUFBSSxFQUFFLElBQUksQ0FBQyxFQUFDLENBQUM7SUFDL0UsSUFBSSxZQUFZLEdBQWMsSUFBSSxDQUFDO0lBQ25DLElBQUkseUJBQXlCLEdBQUcsQ0FBQyxDQUFDO0lBRWxDLFNBQVMsSUFBSSxLQUFJLENBQUM7SUFFbEIsa0JBQWtCLENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQyxDQUFDO0lBQ25DLE9BQU8sTUFBTSxDQUFDLE1BQU0sQ0FBQyxHQUFHLElBQUksQ0FBQztBQUMvQixDQUFDLENBQUMsQ0FBQyxPQUFPLE1BQU0sS0FBSyxXQUFXLElBQUksTUFBTSxJQUFJLE9BQU8sSUFBSSxLQUFLLFdBQVcsSUFBSSxJQUFJLElBQUksTUFBTSxDQUFDLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgR29vZ2xlIEluYy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBVc2Ugb2YgdGhpcyBzb3VyY2UgY29kZSBpcyBnb3Zlcm5lZCBieSBhbiBNSVQtc3R5bGUgbGljZW5zZSB0aGF0IGNhbiBiZVxuICogZm91bmQgaW4gdGhlIExJQ0VOU0UgZmlsZSBhdCBodHRwczovL2FuZ3VsYXIuaW8vbGljZW5zZVxuICovXG5cbi8qKlxuICogU3VwcHJlc3MgY2xvc3VyZSBjb21waWxlciBlcnJvcnMgYWJvdXQgdW5rbm93biAnZ2xvYmFsJyB2YXJpYWJsZVxuICogQGZpbGVvdmVydmlld1xuICogQHN1cHByZXNzIHt1bmRlZmluZWRWYXJzfVxuICovXG5cbi8qKlxuICogWm9uZSBpcyBhIG1lY2hhbmlzbSBmb3IgaW50ZXJjZXB0aW5nIGFuZCBrZWVwaW5nIHRyYWNrIG9mIGFzeW5jaHJvbm91cyB3b3JrLlxuICpcbiAqIEEgWm9uZSBpcyBhIGdsb2JhbCBvYmplY3Qgd2hpY2ggaXMgY29uZmlndXJlZCB3aXRoIHJ1bGVzIGFib3V0IGhvdyB0byBpbnRlcmNlcHQgYW5kIGtlZXAgdHJhY2tcbiAqIG9mIHRoZSBhc3luY2hyb25vdXMgY2FsbGJhY2tzLiBab25lIGhhcyB0aGVzZSByZXNwb25zaWJpbGl0aWVzOlxuICpcbiAqIDEuIEludGVyY2VwdCBhc3luY2hyb25vdXMgdGFzayBzY2hlZHVsaW5nXG4gKiAyLiBXcmFwIGNhbGxiYWNrcyBmb3IgZXJyb3ItaGFuZGxpbmcgYW5kIHpvbmUgdHJhY2tpbmcgYWNyb3NzIGFzeW5jIG9wZXJhdGlvbnMuXG4gKiAzLiBQcm92aWRlIGEgd2F5IHRvIGF0dGFjaCBkYXRhIHRvIHpvbmVzXG4gKiA0LiBQcm92aWRlIGEgY29udGV4dCBzcGVjaWZpYyBsYXN0IGZyYW1lIGVycm9yIGhhbmRsaW5nXG4gKiA1LiAoSW50ZXJjZXB0IGJsb2NraW5nIG1ldGhvZHMpXG4gKlxuICogQSB6b25lIGJ5IGl0c2VsZiBkb2VzIG5vdCBkbyBhbnl0aGluZywgaW5zdGVhZCBpdCByZWxpZXMgb24gc29tZSBvdGhlciBjb2RlIHRvIHJvdXRlIGV4aXN0aW5nXG4gKiBwbGF0Zm9ybSBBUEkgdGhyb3VnaCBpdC4gKFRoZSB6b25lIGxpYnJhcnkgc2hpcHMgd2l0aCBjb2RlIHdoaWNoIG1vbmtleSBwYXRjaGVzIGFsbCBvZiB0aGVcbiAqIGJyb3dzZXJzJ3MgYXN5bmNocm9ub3VzIEFQSSBhbmQgcmVkaXJlY3RzIHRoZW0gdGhyb3VnaCB0aGUgem9uZSBmb3IgaW50ZXJjZXB0aW9uLilcbiAqXG4gKiBJbiBpdHMgc2ltcGxlc3QgZm9ybSBhIHpvbmUgYWxsb3dzIG9uZSB0byBpbnRlcmNlcHQgdGhlIHNjaGVkdWxpbmcgYW5kIGNhbGxpbmcgb2YgYXN5bmNocm9ub3VzXG4gKiBvcGVyYXRpb25zLCBhbmQgZXhlY3V0ZSBhZGRpdGlvbmFsIGNvZGUgYmVmb3JlIGFzIHdlbGwgYXMgYWZ0ZXIgdGhlIGFzeW5jaHJvbm91cyB0YXNrLiBUaGUgcnVsZXNcbiAqIG9mIGludGVyY2VwdGlvbiBhcmUgY29uZmlndXJlZCB1c2luZyBbWm9uZUNvbmZpZ10uIFRoZXJlIGNhbiBiZSBtYW55IGRpZmZlcmVudCB6b25lIGluc3RhbmNlcyBpblxuICogYSBzeXN0ZW0sIGJ1dCBvbmx5IG9uZSB6b25lIGlzIGFjdGl2ZSBhdCBhbnkgZ2l2ZW4gdGltZSB3aGljaCBjYW4gYmUgcmV0cmlldmVkIHVzaW5nXG4gKiBbWm9uZSNjdXJyZW50XS5cbiAqXG4gKlxuICpcbiAqICMjIENhbGxiYWNrIFdyYXBwaW5nXG4gKlxuICogQW4gaW1wb3J0YW50IGFzcGVjdCBvZiB0aGUgem9uZXMgaXMgdGhhdCB0aGV5IHNob3VsZCBwZXJzaXN0IGFjcm9zcyBhc3luY2hyb25vdXMgb3BlcmF0aW9ucy4gVG9cbiAqIGFjaGlldmUgdGhpcywgd2hlbiBhIGZ1dHVyZSB3b3JrIGlzIHNjaGVkdWxlZCB0aHJvdWdoIGFzeW5jIEFQSSwgaXQgaXMgbmVjZXNzYXJ5IHRvIGNhcHR1cmUsIGFuZFxuICogc3Vic2VxdWVudGx5IHJlc3RvcmUgdGhlIGN1cnJlbnQgem9uZS4gRm9yIGV4YW1wbGUgaWYgYSBjb2RlIGlzIHJ1bm5pbmcgaW4gem9uZSBgYmAgYW5kIGl0XG4gKiBpbnZva2VzIGBzZXRUaW1lb3V0YCB0byBzY2hlZHVsZVRhc2sgd29yayBsYXRlciwgdGhlIGBzZXRUaW1lb3V0YCBtZXRob2QgbmVlZHMgdG8gMSkgY2FwdHVyZSB0aGVcbiAqIGN1cnJlbnQgem9uZSBhbmQgMikgd3JhcCB0aGUgYHdyYXBDYWxsYmFja2AgaW4gY29kZSB3aGljaCB3aWxsIHJlc3RvcmUgdGhlIGN1cnJlbnQgem9uZSBgYmAgb25jZVxuICogdGhlIHdyYXBDYWxsYmFjayBleGVjdXRlcy4gSW4gdGhpcyB3YXkgdGhlIHJ1bGVzIHdoaWNoIGdvdmVybiB0aGUgY3VycmVudCBjb2RlIGFyZSBwcmVzZXJ2ZWQgaW5cbiAqIGFsbCBmdXR1cmUgYXN5bmNocm9ub3VzIHRhc2tzLiBUaGVyZSBjb3VsZCBiZSBhIGRpZmZlcmVudCB6b25lIGBjYCB3aGljaCBoYXMgZGlmZmVyZW50IHJ1bGVzIGFuZFxuICogaXMgYXNzb2NpYXRlZCB3aXRoIGRpZmZlcmVudCBhc3luY2hyb25vdXMgdGFza3MuIEFzIHRoZXNlIHRhc2tzIGFyZSBwcm9jZXNzZWQsIGVhY2ggYXN5bmNocm9ub3VzXG4gKiB3cmFwQ2FsbGJhY2sgY29ycmVjdGx5IHJlc3RvcmVzIHRoZSBjb3JyZWN0IHpvbmUsIGFzIHdlbGwgYXMgcHJlc2VydmVzIHRoZSB6b25lIGZvciBmdXR1cmVcbiAqIGFzeW5jaHJvbm91cyBjYWxsYmFja3MuXG4gKlxuICogRXhhbXBsZTogU3VwcG9zZSBhIGJyb3dzZXIgcGFnZSBjb25zaXN0IG9mIGFwcGxpY2F0aW9uIGNvZGUgYXMgd2VsbCBhcyB0aGlyZC1wYXJ0eVxuICogYWR2ZXJ0aXNlbWVudCBjb2RlLiAoVGhlc2UgdHdvIGNvZGUgYmFzZXMgYXJlIGluZGVwZW5kZW50LCBkZXZlbG9wZWQgYnkgZGlmZmVyZW50IG11dHVhbGx5XG4gKiB1bmF3YXJlIGRldmVsb3BlcnMuKSBUaGUgYXBwbGljYXRpb24gY29kZSBtYXkgYmUgaW50ZXJlc3RlZCBpbiBkb2luZyBnbG9iYWwgZXJyb3IgaGFuZGxpbmcgYW5kXG4gKiBzbyBpdCBjb25maWd1cmVzIHRoZSBgYXBwYCB6b25lIHRvIHNlbmQgYWxsIG9mIHRoZSBlcnJvcnMgdG8gdGhlIHNlcnZlciBmb3IgYW5hbHlzaXMsIGFuZCB0aGVuXG4gKiBleGVjdXRlcyB0aGUgYXBwbGljYXRpb24gaW4gdGhlIGBhcHBgIHpvbmUuIFRoZSBhZHZlcnRpc2luZyBjb2RlIGlzIGludGVyZXN0ZWQgaW4gdGhlIHNhbWVcbiAqIGVycm9yIHByb2Nlc3NpbmcgYnV0IGl0IG5lZWRzIHRvIHNlbmQgdGhlIGVycm9ycyB0byBhIGRpZmZlcmVudCB0aGlyZC1wYXJ0eS4gU28gaXQgY3JlYXRlcyB0aGVcbiAqIGBhZHNgIHpvbmUgd2l0aCBhIGRpZmZlcmVudCBlcnJvciBoYW5kbGVyLiBOb3cgYm90aCBhZHZlcnRpc2luZyBhcyB3ZWxsIGFzIGFwcGxpY2F0aW9uIGNvZGVcbiAqIGNyZWF0ZSBtYW55IGFzeW5jaHJvbm91cyBvcGVyYXRpb25zLCBidXQgdGhlIFtab25lXSB3aWxsIGVuc3VyZSB0aGF0IGFsbCBvZiB0aGUgYXN5bmNocm9ub3VzXG4gKiBvcGVyYXRpb25zIGNyZWF0ZWQgZnJvbSB0aGUgYXBwbGljYXRpb24gY29kZSB3aWxsIGV4ZWN1dGUgaW4gYGFwcGAgem9uZSB3aXRoIGl0cyBlcnJvclxuICogaGFuZGxlciBhbmQgYWxsIG9mIHRoZSBhZHZlcnRpc2VtZW50IGNvZGUgd2lsbCBleGVjdXRlIGluIHRoZSBgYWRzYCB6b25lIHdpdGggaXRzIGVycm9yIGhhbmRsZXIuXG4gKiBUaGlzIHdpbGwgbm90IG9ubHkgd29yayBmb3IgdGhlIGFzeW5jIG9wZXJhdGlvbnMgY3JlYXRlZCBkaXJlY3RseSwgYnV0IGFsc28gZm9yIGFsbCBzdWJzZXF1ZW50XG4gKiBhc3luY2hyb25vdXMgb3BlcmF0aW9ucy5cbiAqXG4gKiBJZiB5b3UgdGhpbmsgb2YgY2hhaW4gb2YgYXN5bmNocm9ub3VzIG9wZXJhdGlvbnMgYXMgYSB0aHJlYWQgb2YgZXhlY3V0aW9uIChiaXQgb2YgYSBzdHJldGNoKVxuICogdGhlbiBbWm9uZSNjdXJyZW50XSB3aWxsIGFjdCBhcyBhIHRocmVhZCBsb2NhbCB2YXJpYWJsZS5cbiAqXG4gKlxuICpcbiAqICMjIEFzeW5jaHJvbm91cyBvcGVyYXRpb24gc2NoZWR1bGluZ1xuICpcbiAqIEluIGFkZGl0aW9uIHRvIHdyYXBwaW5nIHRoZSBjYWxsYmFja3MgdG8gcmVzdG9yZSB0aGUgem9uZSwgYWxsIG9wZXJhdGlvbnMgd2hpY2ggY2F1c2UgYVxuICogc2NoZWR1bGluZyBvZiB3b3JrIGZvciBsYXRlciBhcmUgcm91dGVkIHRocm91Z2ggdGhlIGN1cnJlbnQgem9uZSB3aGljaCBpcyBhbGxvd2VkIHRvIGludGVyY2VwdFxuICogdGhlbSBieSBhZGRpbmcgd29yayBiZWZvcmUgb3IgYWZ0ZXIgdGhlIHdyYXBDYWxsYmFjayBhcyB3ZWxsIGFzIHVzaW5nIGRpZmZlcmVudCBtZWFucyBvZlxuICogYWNoaWV2aW5nIHRoZSByZXF1ZXN0LiAoVXNlZnVsIGZvciB1bml0IHRlc3RpbmcsIG9yIHRyYWNraW5nIG9mIHJlcXVlc3RzKS4gSW4gc29tZSBpbnN0YW5jZXNcbiAqIHN1Y2ggYXMgYHNldFRpbWVvdXRgIHRoZSB3cmFwcGluZyBvZiB0aGUgd3JhcENhbGxiYWNrIGFuZCBzY2hlZHVsaW5nIGlzIGRvbmUgaW4gdGhlIHNhbWVcbiAqIHdyYXBDYWxsYmFjaywgYnV0IHRoZXJlIGFyZSBvdGhlciBleGFtcGxlcyBzdWNoIGFzIGBQcm9taXNlc2Agd2hlcmUgdGhlIGB0aGVuYCB3cmFwQ2FsbGJhY2sgaXNcbiAqIHdyYXBwZWQsIGJ1dCB0aGUgZXhlY3V0aW9uIG9mIGB0aGVuYCBpcyB0cmlnZ2VyZWQgYnkgYFByb21pc2VgIHNjaGVkdWxpbmcgYHJlc29sdmVgIHdvcmsuXG4gKlxuICogRnVuZGFtZW50YWxseSB0aGVyZSBhcmUgdGhyZWUga2luZHMgb2YgdGFza3Mgd2hpY2ggY2FuIGJlIHNjaGVkdWxlZDpcbiAqXG4gKiAxLiBbTWljcm9UYXNrXSB1c2VkIGZvciBkb2luZyB3b3JrIHJpZ2h0IGFmdGVyIHRoZSBjdXJyZW50IHRhc2suIFRoaXMgaXMgbm9uLWNhbmNlbGFibGUgd2hpY2ggaXNcbiAqICAgIGd1YXJhbnRlZWQgdG8gcnVuIGV4YWN0bHkgb25jZSBhbmQgaW1tZWRpYXRlbHkuXG4gKiAyLiBbTWFjcm9UYXNrXSB1c2VkIGZvciBkb2luZyB3b3JrIGxhdGVyLiBTdWNoIGFzIGBzZXRUaW1lb3V0YC4gVGhpcyBpcyB0eXBpY2FsbHkgY2FuY2VsYWJsZVxuICogICAgd2hpY2ggaXMgZ3VhcmFudGVlZCB0byBleGVjdXRlIGF0IGxlYXN0IG9uY2UgYWZ0ZXIgc29tZSB3ZWxsIHVuZGVyc3Rvb2QgZGVsYXkuXG4gKiAzLiBbRXZlbnRUYXNrXSB1c2VkIGZvciBsaXN0ZW5pbmcgb24gc29tZSBmdXR1cmUgZXZlbnQuIFRoaXMgbWF5IGV4ZWN1dGUgemVybyBvciBtb3JlIHRpbWVzLCB3aXRoXG4gKiAgICBhbiB1bmtub3duIGRlbGF5LlxuICpcbiAqIEVhY2ggYXN5bmNocm9ub3VzIEFQSSBpcyBtb2RlbGVkIGFuZCByb3V0ZWQgdGhyb3VnaCBvbmUgb2YgdGhlc2UgQVBJcy5cbiAqXG4gKlxuICogIyMjIFtNaWNyb1Rhc2tdXG4gKlxuICogW01pY3JvVGFza11zIHJlcHJlc2VudCB3b3JrIHdoaWNoIHdpbGwgYmUgZG9uZSBpbiBjdXJyZW50IFZNIHR1cm4gYXMgc29vbiBhcyBwb3NzaWJsZSwgYmVmb3JlIFZNXG4gKiB5aWVsZGluZy5cbiAqXG4gKlxuICogIyMjIFtNYWNyb1Rhc2tdXG4gKlxuICogW01hY3JvVGFza11zIHJlcHJlc2VudCB3b3JrIHdoaWNoIHdpbGwgYmUgZG9uZSBhZnRlciBzb21lIGRlbGF5LiAoU29tZXRpbWVzIHRoZSBkZWxheSBpc1xuICogYXBwcm94aW1hdGUgc3VjaCBhcyBvbiBuZXh0IGF2YWlsYWJsZSBhbmltYXRpb24gZnJhbWUpLiBUeXBpY2FsbHkgdGhlc2UgbWV0aG9kcyBpbmNsdWRlOlxuICogYHNldFRpbWVvdXRgLCBgc2V0SW1tZWRpYXRlYCwgYHNldEludGVydmFsYCwgYHJlcXVlc3RBbmltYXRpb25GcmFtZWAsIGFuZCBhbGwgYnJvd3NlciBzcGVjaWZpY1xuICogdmFyaWFudHMuXG4gKlxuICpcbiAqICMjIyBbRXZlbnRUYXNrXVxuICpcbiAqIFtFdmVudFRhc2tdcyByZXByZXNlbnQgYSByZXF1ZXN0IHRvIGNyZWF0ZSBhIGxpc3RlbmVyIG9uIGFuIGV2ZW50LiBVbmxpa2UgdGhlIG90aGVyIHRhc2tcbiAqIGV2ZW50cyB0aGV5IG1heSBuZXZlciBiZSBleGVjdXRlZCwgYnV0IHR5cGljYWxseSBleGVjdXRlIG1vcmUgdGhhbiBvbmNlLiBUaGVyZSBpcyBubyBxdWV1ZSBvZlxuICogZXZlbnRzLCByYXRoZXIgdGhlaXIgY2FsbGJhY2tzIGFyZSB1bnByZWRpY3RhYmxlIGJvdGggaW4gb3JkZXIgYW5kIHRpbWUuXG4gKlxuICpcbiAqICMjIEdsb2JhbCBFcnJvciBIYW5kbGluZ1xuICpcbiAqXG4gKiAjIyBDb21wb3NhYmlsaXR5XG4gKlxuICogWm9uZXMgY2FuIGJlIGNvbXBvc2VkIHRvZ2V0aGVyIHRocm91Z2ggW1pvbmUuZm9yaygpXS4gQSBjaGlsZCB6b25lIG1heSBjcmVhdGUgaXRzIG93biBzZXQgb2ZcbiAqIHJ1bGVzLiBBIGNoaWxkIHpvbmUgaXMgZXhwZWN0ZWQgdG8gZWl0aGVyOlxuICpcbiAqIDEuIERlbGVnYXRlIHRoZSBpbnRlcmNlcHRpb24gdG8gYSBwYXJlbnQgem9uZSwgYW5kIG9wdGlvbmFsbHkgYWRkIGJlZm9yZSBhbmQgYWZ0ZXIgd3JhcENhbGxiYWNrXG4gKiAgICBob29rcy5cbiAqIDIuIFByb2Nlc3MgdGhlIHJlcXVlc3QgaXRzZWxmIHdpdGhvdXQgZGVsZWdhdGlvbi5cbiAqXG4gKiBDb21wb3NhYmlsaXR5IGFsbG93cyB6b25lcyB0byBrZWVwIHRoZWlyIGNvbmNlcm5zIGNsZWFuLiBGb3IgZXhhbXBsZSBhIHRvcCBtb3N0IHpvbmUgbWF5IGNob29zZVxuICogdG8gaGFuZGxlIGVycm9yIGhhbmRsaW5nLCB3aGlsZSBjaGlsZCB6b25lcyBtYXkgY2hvb3NlIHRvIGRvIHVzZXIgYWN0aW9uIHRyYWNraW5nLlxuICpcbiAqXG4gKiAjIyBSb290IFpvbmVcbiAqXG4gKiBBdCB0aGUgc3RhcnQgdGhlIGJyb3dzZXIgd2lsbCBydW4gaW4gYSBzcGVjaWFsIHJvb3Qgem9uZSwgd2hpY2ggaXMgY29uZmlndXJlZCB0byBiZWhhdmUgZXhhY3RseVxuICogbGlrZSB0aGUgcGxhdGZvcm0sIG1ha2luZyBhbnkgZXhpc3RpbmcgY29kZSB3aGljaCBpcyBub3Qgem9uZS1hd2FyZSBiZWhhdmUgYXMgZXhwZWN0ZWQuIEFsbFxuICogem9uZXMgYXJlIGNoaWxkcmVuIG9mIHRoZSByb290IHpvbmUuXG4gKlxuICovXG5pbnRlcmZhY2UgWm9uZSB7XG4gIC8qKlxuICAgKlxuICAgKiBAcmV0dXJucyB7Wm9uZX0gVGhlIHBhcmVudCBab25lLlxuICAgKi9cbiAgcGFyZW50OiBab25lfG51bGw7XG4gIC8qKlxuICAgKiBAcmV0dXJucyB7c3RyaW5nfSBUaGUgWm9uZSBuYW1lICh1c2VmdWwgZm9yIGRlYnVnZ2luZylcbiAgICovXG4gIG5hbWU6IHN0cmluZztcblxuICAvKipcbiAgICogUmV0dXJucyBhIHZhbHVlIGFzc29jaWF0ZWQgd2l0aCB0aGUgYGtleWAuXG4gICAqXG4gICAqIElmIHRoZSBjdXJyZW50IHpvbmUgZG9lcyBub3QgaGF2ZSBhIGtleSwgdGhlIHJlcXVlc3QgaXMgZGVsZWdhdGVkIHRvIHRoZSBwYXJlbnQgem9uZS4gVXNlXG4gICAqIFtab25lU3BlYy5wcm9wZXJ0aWVzXSB0byBjb25maWd1cmUgdGhlIHNldCBvZiBwcm9wZXJ0aWVzIGFzc29jaWF0ZWQgd2l0aCB0aGUgY3VycmVudCB6b25lLlxuICAgKlxuICAgKiBAcGFyYW0ga2V5IFRoZSBrZXkgdG8gcmV0cmlldmUuXG4gICAqIEByZXR1cm5zIHthbnl9IFRoZSB2YWx1ZSBmb3IgdGhlIGtleSwgb3IgYHVuZGVmaW5lZGAgaWYgbm90IGZvdW5kLlxuICAgKi9cbiAgZ2V0KGtleTogc3RyaW5nKTogYW55O1xuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGEgWm9uZSB3aGljaCBkZWZpbmVzIGEgYGtleWAuXG4gICAqXG4gICAqIFJlY3Vyc2l2ZWx5IHNlYXJjaCB0aGUgcGFyZW50IFpvbmUgdW50aWwgYSBab25lIHdoaWNoIGhhcyBhIHByb3BlcnR5IGBrZXlgIGlzIGZvdW5kLlxuICAgKlxuICAgKiBAcGFyYW0ga2V5IFRoZSBrZXkgdG8gdXNlIGZvciBpZGVudGlmaWNhdGlvbiBvZiB0aGUgcmV0dXJuZWQgem9uZS5cbiAgICogQHJldHVybnMge1pvbmV9IFRoZSBab25lIHdoaWNoIGRlZmluZXMgdGhlIGBrZXlgLCBgbnVsbGAgaWYgbm90IGZvdW5kLlxuICAgKi9cbiAgZ2V0Wm9uZVdpdGgoa2V5OiBzdHJpbmcpOiBab25lfG51bGw7XG5cbiAgLyoqXG4gICAqIFVzZWQgdG8gY3JlYXRlIGEgY2hpbGQgem9uZS5cbiAgICpcbiAgICogQHBhcmFtIHpvbmVTcGVjIEEgc2V0IG9mIHJ1bGVzIHdoaWNoIHRoZSBjaGlsZCB6b25lIHNob3VsZCBmb2xsb3cuXG4gICAqIEByZXR1cm5zIHtab25lfSBBIG5ldyBjaGlsZCB6b25lLlxuICAgKi9cbiAgZm9yayh6b25lU3BlYzogWm9uZVNwZWMpOiBab25lO1xuXG4gIC8qKlxuICAgKiBXcmFwcyBhIGNhbGxiYWNrIGZ1bmN0aW9uIGluIGEgbmV3IGZ1bmN0aW9uIHdoaWNoIHdpbGwgcHJvcGVybHkgcmVzdG9yZSB0aGUgY3VycmVudCB6b25lIHVwb25cbiAgICogaW52b2NhdGlvbi5cbiAgICpcbiAgICogVGhlIHdyYXBwZWQgZnVuY3Rpb24gd2lsbCBwcm9wZXJseSBmb3J3YXJkIGB0aGlzYCBhcyB3ZWxsIGFzIGBhcmd1bWVudHNgIHRvIHRoZSBgY2FsbGJhY2tgLlxuICAgKlxuICAgKiBCZWZvcmUgdGhlIGZ1bmN0aW9uIGlzIHdyYXBwZWQgdGhlIHpvbmUgY2FuIGludGVyY2VwdCB0aGUgYGNhbGxiYWNrYCBieSBkZWNsYXJpbmdcbiAgICogW1pvbmVTcGVjLm9uSW50ZXJjZXB0XS5cbiAgICpcbiAgICogQHBhcmFtIGNhbGxiYWNrIHRoZSBmdW5jdGlvbiB3aGljaCB3aWxsIGJlIHdyYXBwZWQgaW4gdGhlIHpvbmUuXG4gICAqIEBwYXJhbSBzb3VyY2UgQSB1bmlxdWUgZGVidWcgbG9jYXRpb24gb2YgdGhlIEFQSSBiZWluZyB3cmFwcGVkLlxuICAgKiBAcmV0dXJucyB7ZnVuY3Rpb24oKTogKn0gQSBmdW5jdGlvbiB3aGljaCB3aWxsIGludm9rZSB0aGUgYGNhbGxiYWNrYCB0aHJvdWdoIFtab25lLnJ1bkd1YXJkZWRdLlxuICAgKi9cbiAgd3JhcDxGIGV4dGVuZHMgRnVuY3Rpb24+KGNhbGxiYWNrOiBGLCBzb3VyY2U6IHN0cmluZyk6IEY7XG5cbiAgLyoqXG4gICAqIEludm9rZXMgYSBmdW5jdGlvbiBpbiBhIGdpdmVuIHpvbmUuXG4gICAqXG4gICAqIFRoZSBpbnZvY2F0aW9uIG9mIGBjYWxsYmFja2AgY2FuIGJlIGludGVyY2VwdGVkIGJ5IGRlY2xhcmluZyBbWm9uZVNwZWMub25JbnZva2VdLlxuICAgKlxuICAgKiBAcGFyYW0gY2FsbGJhY2sgVGhlIGZ1bmN0aW9uIHRvIGludm9rZS5cbiAgICogQHBhcmFtIGFwcGx5VGhpc1xuICAgKiBAcGFyYW0gYXBwbHlBcmdzXG4gICAqIEBwYXJhbSBzb3VyY2UgQSB1bmlxdWUgZGVidWcgbG9jYXRpb24gb2YgdGhlIEFQSSBiZWluZyBpbnZva2VkLlxuICAgKiBAcmV0dXJucyB7YW55fSBWYWx1ZSBmcm9tIHRoZSBgY2FsbGJhY2tgIGZ1bmN0aW9uLlxuICAgKi9cbiAgcnVuPFQ+KGNhbGxiYWNrOiBGdW5jdGlvbiwgYXBwbHlUaGlzPzogYW55LCBhcHBseUFyZ3M/OiBhbnlbXSwgc291cmNlPzogc3RyaW5nKTogVDtcblxuICAvKipcbiAgICogSW52b2tlcyBhIGZ1bmN0aW9uIGluIGEgZ2l2ZW4gem9uZSBhbmQgY2F0Y2hlcyBhbnkgZXhjZXB0aW9ucy5cbiAgICpcbiAgICogQW55IGV4Y2VwdGlvbnMgdGhyb3duIHdpbGwgYmUgZm9yd2FyZGVkIHRvIFtab25lLkhhbmRsZUVycm9yXS5cbiAgICpcbiAgICogVGhlIGludm9jYXRpb24gb2YgYGNhbGxiYWNrYCBjYW4gYmUgaW50ZXJjZXB0ZWQgYnkgZGVjbGFyaW5nIFtab25lU3BlYy5vbkludm9rZV0uIFRoZVxuICAgKiBoYW5kbGluZyBvZiBleGNlcHRpb25zIGNhbiBiZSBpbnRlcmNlcHRlZCBieSBkZWNsYXJpbmcgW1pvbmVTcGVjLmhhbmRsZUVycm9yXS5cbiAgICpcbiAgICogQHBhcmFtIGNhbGxiYWNrIFRoZSBmdW5jdGlvbiB0byBpbnZva2UuXG4gICAqIEBwYXJhbSBhcHBseVRoaXNcbiAgICogQHBhcmFtIGFwcGx5QXJnc1xuICAgKiBAcGFyYW0gc291cmNlIEEgdW5pcXVlIGRlYnVnIGxvY2F0aW9uIG9mIHRoZSBBUEkgYmVpbmcgaW52b2tlZC5cbiAgICogQHJldHVybnMge2FueX0gVmFsdWUgZnJvbSB0aGUgYGNhbGxiYWNrYCBmdW5jdGlvbi5cbiAgICovXG4gIHJ1bkd1YXJkZWQ8VD4oY2FsbGJhY2s6IEZ1bmN0aW9uLCBhcHBseVRoaXM/OiBhbnksIGFwcGx5QXJncz86IGFueVtdLCBzb3VyY2U/OiBzdHJpbmcpOiBUO1xuXG4gIC8qKlxuICAgKiBFeGVjdXRlIHRoZSBUYXNrIGJ5IHJlc3RvcmluZyB0aGUgW1pvbmUuY3VycmVudFRhc2tdIGluIHRoZSBUYXNrJ3Mgem9uZS5cbiAgICpcbiAgICogQHBhcmFtIHRhc2sgdG8gcnVuXG4gICAqIEBwYXJhbSBhcHBseVRoaXNcbiAgICogQHBhcmFtIGFwcGx5QXJnc1xuICAgKiBAcmV0dXJucyB7Kn1cbiAgICovXG4gIHJ1blRhc2sodGFzazogVGFzaywgYXBwbHlUaGlzPzogYW55LCBhcHBseUFyZ3M/OiBhbnkpOiBhbnk7XG5cbiAgLyoqXG4gICAqIFNjaGVkdWxlIGEgTWljcm9UYXNrLlxuICAgKlxuICAgKiBAcGFyYW0gc291cmNlXG4gICAqIEBwYXJhbSBjYWxsYmFja1xuICAgKiBAcGFyYW0gZGF0YVxuICAgKiBAcGFyYW0gY3VzdG9tU2NoZWR1bGVcbiAgICovXG4gIHNjaGVkdWxlTWljcm9UYXNrKFxuICAgICAgc291cmNlOiBzdHJpbmcsIGNhbGxiYWNrOiBGdW5jdGlvbiwgZGF0YT86IFRhc2tEYXRhLFxuICAgICAgY3VzdG9tU2NoZWR1bGU/OiAodGFzazogVGFzaykgPT4gdm9pZCk6IE1pY3JvVGFzaztcblxuICAvKipcbiAgICogU2NoZWR1bGUgYSBNYWNyb1Rhc2suXG4gICAqXG4gICAqIEBwYXJhbSBzb3VyY2VcbiAgICogQHBhcmFtIGNhbGxiYWNrXG4gICAqIEBwYXJhbSBkYXRhXG4gICAqIEBwYXJhbSBjdXN0b21TY2hlZHVsZVxuICAgKiBAcGFyYW0gY3VzdG9tQ2FuY2VsXG4gICAqL1xuICBzY2hlZHVsZU1hY3JvVGFzayhcbiAgICAgIHNvdXJjZTogc3RyaW5nLCBjYWxsYmFjazogRnVuY3Rpb24sIGRhdGE/OiBUYXNrRGF0YSwgY3VzdG9tU2NoZWR1bGU/OiAodGFzazogVGFzaykgPT4gdm9pZCxcbiAgICAgIGN1c3RvbUNhbmNlbD86ICh0YXNrOiBUYXNrKSA9PiB2b2lkKTogTWFjcm9UYXNrO1xuXG4gIC8qKlxuICAgKiBTY2hlZHVsZSBhbiBFdmVudFRhc2suXG4gICAqXG4gICAqIEBwYXJhbSBzb3VyY2VcbiAgICogQHBhcmFtIGNhbGxiYWNrXG4gICAqIEBwYXJhbSBkYXRhXG4gICAqIEBwYXJhbSBjdXN0b21TY2hlZHVsZVxuICAgKiBAcGFyYW0gY3VzdG9tQ2FuY2VsXG4gICAqL1xuICBzY2hlZHVsZUV2ZW50VGFzayhcbiAgICAgIHNvdXJjZTogc3RyaW5nLCBjYWxsYmFjazogRnVuY3Rpb24sIGRhdGE/OiBUYXNrRGF0YSwgY3VzdG9tU2NoZWR1bGU/OiAodGFzazogVGFzaykgPT4gdm9pZCxcbiAgICAgIGN1c3RvbUNhbmNlbD86ICh0YXNrOiBUYXNrKSA9PiB2b2lkKTogRXZlbnRUYXNrO1xuXG4gIC8qKlxuICAgKiBTY2hlZHVsZSBhbiBleGlzdGluZyBUYXNrLlxuICAgKlxuICAgKiBVc2VmdWwgZm9yIHJlc2NoZWR1bGluZyBhIHRhc2sgd2hpY2ggd2FzIGFscmVhZHkgY2FuY2VsZWQuXG4gICAqXG4gICAqIEBwYXJhbSB0YXNrXG4gICAqL1xuICBzY2hlZHVsZVRhc2s8VCBleHRlbmRzIFRhc2s+KHRhc2s6IFQpOiBUO1xuXG4gIC8qKlxuICAgKiBBbGxvd3MgdGhlIHpvbmUgdG8gaW50ZXJjZXB0IGNhbmNlbGluZyBvZiBzY2hlZHVsZWQgVGFzay5cbiAgICpcbiAgICogVGhlIGludGVyY2VwdGlvbiBpcyBjb25maWd1cmVkIHVzaW5nIFtab25lU3BlYy5vbkNhbmNlbFRhc2tdLiBUaGUgZGVmYXVsdCBjYW5jZWxlciBpbnZva2VzXG4gICAqIHRoZSBbVGFzay5jYW5jZWxGbl0uXG4gICAqXG4gICAqIEBwYXJhbSB0YXNrXG4gICAqIEByZXR1cm5zIHthbnl9XG4gICAqL1xuICBjYW5jZWxUYXNrKHRhc2s6IFRhc2spOiBhbnk7XG59XG5cbmludGVyZmFjZSBab25lVHlwZSB7XG4gIC8qKlxuICAgKiBAcmV0dXJucyB7Wm9uZX0gUmV0dXJucyB0aGUgY3VycmVudCBbWm9uZV0uIFRoZSBvbmx5IHdheSB0byBjaGFuZ2VcbiAgICogdGhlIGN1cnJlbnQgem9uZSBpcyBieSBpbnZva2luZyBhIHJ1bigpIG1ldGhvZCwgd2hpY2ggd2lsbCB1cGRhdGUgdGhlIGN1cnJlbnQgem9uZSBmb3IgdGhlXG4gICAqIGR1cmF0aW9uIG9mIHRoZSBydW4gbWV0aG9kIGNhbGxiYWNrLlxuICAgKi9cbiAgY3VycmVudDogWm9uZTtcblxuICAvKipcbiAgICogQHJldHVybnMge1Rhc2t9IFRoZSB0YXNrIGFzc29jaWF0ZWQgd2l0aCB0aGUgY3VycmVudCBleGVjdXRpb24uXG4gICAqL1xuICBjdXJyZW50VGFzazogVGFza3xudWxsO1xuXG4gIC8qKlxuICAgKiBWZXJpZnkgdGhhdCBab25lIGhhcyBiZWVuIGNvcnJlY3RseSBwYXRjaGVkLiBTcGVjaWZpY2FsbHkgdGhhdCBQcm9taXNlIGlzIHpvbmUgYXdhcmUuXG4gICAqL1xuICBhc3NlcnRab25lUGF0Y2hlZCgpOiB2b2lkO1xuXG4gIC8qKlxuICAgKiAgUmV0dXJuIHRoZSByb290IHpvbmUuXG4gICAqL1xuICByb290OiBab25lO1xuXG4gIC8qKlxuICAqIGxvYWQgcGF0Y2ggZm9yIHNwZWNpZmllZCBuYXRpdmUgbW9kdWxlLCBhbGxvdyB1c2VyIHRvXG4gICogZGVmaW5lIHRoZWlyIG93biBwYXRjaCwgdXNlciBjYW4gdXNlIHRoaXMgQVBJIGFmdGVyIGxvYWRpbmcgem9uZS5qc1xuICAqL1xuICBfX2xvYWRfcGF0Y2gobmFtZTogc3RyaW5nLCBmbjogX1BhdGNoRm4pOiB2b2lkO1xuXG4gIC8qKlxuICAgKiBab25lIHN5bWJvbCBBUEkgdG8gZ2VuZXJhdGUgYSBzdHJpbmcgd2l0aCBfX3pvbmVfc3ltYm9sX18gcHJlZml4XG4gICAqL1xuICBfX3N5bWJvbF9fKG5hbWU6IHN0cmluZyk6IHN0cmluZztcbn1cblxuLyoqIEBpbnRlcm5hbCAqL1xudHlwZSBfUGF0Y2hGbiA9IChnbG9iYWw6IFdpbmRvdywgWm9uZTogWm9uZVR5cGUsIGFwaTogX1pvbmVQcml2YXRlKSA9PiB2b2lkO1xuXG4vKiogQGludGVybmFsICovXG5pbnRlcmZhY2UgX1pvbmVQcml2YXRlIHtcbiAgY3VycmVudFpvbmVGcmFtZTogKCkgPT4gX1pvbmVGcmFtZTtcbiAgc3ltYm9sOiAobmFtZTogc3RyaW5nKSA9PiBzdHJpbmc7XG4gIHNjaGVkdWxlTWljcm9UYXNrOiAodGFzaz86IE1pY3JvVGFzaykgPT4gdm9pZDtcbiAgb25VbmhhbmRsZWRFcnJvcjogKGVycm9yOiBFcnJvcikgPT4gdm9pZDtcbiAgbWljcm90YXNrRHJhaW5Eb25lOiAoKSA9PiB2b2lkO1xuICBzaG93VW5jYXVnaHRFcnJvcjogKCkgPT4gYm9vbGVhbjtcbiAgcGF0Y2hFdmVudFRhcmdldDogKGdsb2JhbDogYW55LCBhcGlzOiBhbnlbXSwgb3B0aW9ucz86IGFueSkgPT4gYm9vbGVhbltdO1xuICBwYXRjaE9uUHJvcGVydGllczogKG9iajogYW55LCBwcm9wZXJ0aWVzOiBzdHJpbmdbXXxudWxsLCBwcm90b3R5cGU/OiBhbnkpID0+IHZvaWQ7XG4gIHBhdGNoVGhlbjogKGN0cm86IEZ1bmN0aW9uKSA9PiB2b2lkO1xuICBzZXROYXRpdmVQcm9taXNlOiAobmF0aXZlUHJvbWlzZTogYW55KSA9PiB2b2lkO1xuICBwYXRjaE1ldGhvZDpcbiAgICAgICh0YXJnZXQ6IGFueSwgbmFtZTogc3RyaW5nLFxuICAgICAgIHBhdGNoRm46IChkZWxlZ2F0ZTogRnVuY3Rpb24sIGRlbGVnYXRlTmFtZTogc3RyaW5nLCBuYW1lOiBzdHJpbmcpID0+XG4gICAgICAgICAgIChzZWxmOiBhbnksIGFyZ3M6IGFueVtdKSA9PiBhbnkpID0+IEZ1bmN0aW9uIHwgbnVsbDtcbiAgYmluZEFyZ3VtZW50czogKGFyZ3M6IGFueVtdLCBzb3VyY2U6IHN0cmluZykgPT4gYW55W107XG4gIHBhdGNoTWFjcm9UYXNrOlxuICAgICAgKG9iajogYW55LCBmdW5jTmFtZTogc3RyaW5nLCBtZXRhQ3JlYXRvcjogKHNlbGY6IGFueSwgYXJnczogYW55W10pID0+IGFueSkgPT4gdm9pZDtcbiAgcGF0Y2hFdmVudFByb3RvdHlwZTogKF9nbG9iYWw6IGFueSwgYXBpOiBfWm9uZVByaXZhdGUpID0+IHZvaWQ7XG4gIGlzSUVPckVkZ2U6ICgpID0+IGJvb2xlYW47XG4gIE9iamVjdERlZmluZVByb3BlcnR5OlxuICAgICAgKG86IGFueSwgcDogUHJvcGVydHlLZXksIGF0dHJpYnV0ZXM6IFByb3BlcnR5RGVzY3JpcHRvciZUaGlzVHlwZTxhbnk+KSA9PiBhbnk7XG4gIE9iamVjdEdldE93blByb3BlcnR5RGVzY3JpcHRvcjogKG86IGFueSwgcDogUHJvcGVydHlLZXkpID0+IFByb3BlcnR5RGVzY3JpcHRvciB8IHVuZGVmaW5lZDtcbiAgT2JqZWN0Q3JlYXRlKG86IG9iamVjdHxudWxsLCBwcm9wZXJ0aWVzPzogUHJvcGVydHlEZXNjcmlwdG9yTWFwJlRoaXNUeXBlPGFueT4pOiBhbnk7XG4gIEFycmF5U2xpY2Uoc3RhcnQ/OiBudW1iZXIsIGVuZD86IG51bWJlcik6IGFueVtdO1xuICBwYXRjaENsYXNzOiAoY2xhc3NOYW1lOiBzdHJpbmcpID0+IHZvaWQ7XG4gIHdyYXBXaXRoQ3VycmVudFpvbmU6IChjYWxsYmFjazogYW55LCBzb3VyY2U6IHN0cmluZykgPT4gYW55O1xuICBmaWx0ZXJQcm9wZXJ0aWVzOiAodGFyZ2V0OiBhbnksIG9uUHJvcGVydGllczogc3RyaW5nW10sIGlnbm9yZVByb3BlcnRpZXM6IGFueVtdKSA9PiBzdHJpbmdbXTtcbiAgYXR0YWNoT3JpZ2luVG9QYXRjaGVkOiAodGFyZ2V0OiBhbnksIG9yaWdpbjogYW55KSA9PiB2b2lkO1xuICBfcmVkZWZpbmVQcm9wZXJ0eTogKHRhcmdldDogYW55LCBjYWxsYmFjazogc3RyaW5nLCBkZXNjOiBhbnkpID0+IHZvaWQ7XG4gIHBhdGNoQ2FsbGJhY2tzOlxuICAgICAgKGFwaTogX1pvbmVQcml2YXRlLCB0YXJnZXQ6IGFueSwgdGFyZ2V0TmFtZTogc3RyaW5nLCBtZXRob2Q6IHN0cmluZyxcbiAgICAgICBjYWxsYmFja3M6IHN0cmluZ1tdKSA9PiB2b2lkO1xuICBnZXRHbG9iYWxPYmplY3RzOiAoKSA9PiB7XG4gICAgZ2xvYmFsU291cmNlczogYW55LCB6b25lU3ltYm9sRXZlbnROYW1lczogYW55LCBldmVudE5hbWVzOiBzdHJpbmdbXSwgaXNCcm93c2VyOiBib29sZWFuLFxuICAgICAgICBpc01peDogYm9vbGVhbiwgaXNOb2RlOiBib29sZWFuLCBUUlVFX1NUUjogc3RyaW5nLCBGQUxTRV9TVFI6IHN0cmluZyxcbiAgICAgICAgWk9ORV9TWU1CT0xfUFJFRklYOiBzdHJpbmcsIEFERF9FVkVOVF9MSVNURU5FUl9TVFI6IHN0cmluZyxcbiAgICAgICAgUkVNT1ZFX0VWRU5UX0xJU1RFTkVSX1NUUjogc3RyaW5nXG4gIH0gfCB1bmRlZmluZWQ7XG59XG5cbi8qKiBAaW50ZXJuYWwgKi9cbmludGVyZmFjZSBfWm9uZUZyYW1lIHtcbiAgcGFyZW50OiBfWm9uZUZyYW1lfG51bGw7XG4gIHpvbmU6IFpvbmU7XG59XG5cbmludGVyZmFjZSBVbmNhdWdodFByb21pc2VFcnJvciBleHRlbmRzIEVycm9yIHtcbiAgem9uZTogWm9uZTtcbiAgdGFzazogVGFzaztcbiAgcHJvbWlzZTogUHJvbWlzZTxhbnk+O1xuICByZWplY3Rpb246IGFueTtcbn1cblxuLyoqXG4gKiBQcm92aWRlcyBhIHdheSB0byBjb25maWd1cmUgdGhlIGludGVyY2VwdGlvbiBvZiB6b25lIGV2ZW50cy5cbiAqXG4gKiBPbmx5IHRoZSBgbmFtZWAgcHJvcGVydHkgaXMgcmVxdWlyZWQgKGFsbCBvdGhlciBhcmUgb3B0aW9uYWwpLlxuICovXG5pbnRlcmZhY2UgWm9uZVNwZWMge1xuICAvKipcbiAgICogVGhlIG5hbWUgb2YgdGhlIHpvbmUuIFVzZWZ1bCB3aGVuIGRlYnVnZ2luZyBab25lcy5cbiAgICovXG4gIG5hbWU6IHN0cmluZztcblxuICAvKipcbiAgICogQSBzZXQgb2YgcHJvcGVydGllcyB0byBiZSBhc3NvY2lhdGVkIHdpdGggWm9uZS4gVXNlIFtab25lLmdldF0gdG8gcmV0cmlldmUgdGhlbS5cbiAgICovXG4gIHByb3BlcnRpZXM/OiB7W2tleTogc3RyaW5nXTogYW55fTtcblxuICAvKipcbiAgICogQWxsb3dzIHRoZSBpbnRlcmNlcHRpb24gb2Ygem9uZSBmb3JraW5nLlxuICAgKlxuICAgKiBXaGVuIHRoZSB6b25lIGlzIGJlaW5nIGZvcmtlZCwgdGhlIHJlcXVlc3QgaXMgZm9yd2FyZGVkIHRvIHRoaXMgbWV0aG9kIGZvciBpbnRlcmNlcHRpb24uXG4gICAqXG4gICAqIEBwYXJhbSBwYXJlbnRab25lRGVsZWdhdGUgRGVsZWdhdGUgd2hpY2ggcGVyZm9ybXMgdGhlIHBhcmVudCBbWm9uZVNwZWNdIG9wZXJhdGlvbi5cbiAgICogQHBhcmFtIGN1cnJlbnRab25lIFRoZSBjdXJyZW50IFtab25lXSB3aGVyZSB0aGUgY3VycmVudCBpbnRlcmNlcHRvciBoYXMgYmVlbiBkZWNsYXJlZC5cbiAgICogQHBhcmFtIHRhcmdldFpvbmUgVGhlIFtab25lXSB3aGljaCBvcmlnaW5hbGx5IHJlY2VpdmVkIHRoZSByZXF1ZXN0LlxuICAgKiBAcGFyYW0gem9uZVNwZWMgVGhlIGFyZ3VtZW50IHBhc3NlZCBpbnRvIHRoZSBgZm9ya2AgbWV0aG9kLlxuICAgKi9cbiAgb25Gb3JrPzpcbiAgICAgIChwYXJlbnRab25lRGVsZWdhdGU6IFpvbmVEZWxlZ2F0ZSwgY3VycmVudFpvbmU6IFpvbmUsIHRhcmdldFpvbmU6IFpvbmUsXG4gICAgICAgem9uZVNwZWM6IFpvbmVTcGVjKSA9PiBab25lO1xuXG4gIC8qKlxuICAgKiBBbGxvd3MgaW50ZXJjZXB0aW9uIG9mIHRoZSB3cmFwcGluZyBvZiB0aGUgY2FsbGJhY2suXG4gICAqXG4gICAqIEBwYXJhbSBwYXJlbnRab25lRGVsZWdhdGUgRGVsZWdhdGUgd2hpY2ggcGVyZm9ybXMgdGhlIHBhcmVudCBbWm9uZVNwZWNdIG9wZXJhdGlvbi5cbiAgICogQHBhcmFtIGN1cnJlbnRab25lIFRoZSBjdXJyZW50IFtab25lXSB3aGVyZSB0aGUgY3VycmVudCBpbnRlcmNlcHRvciBoYXMgYmVlbiBkZWNsYXJlZC5cbiAgICogQHBhcmFtIHRhcmdldFpvbmUgVGhlIFtab25lXSB3aGljaCBvcmlnaW5hbGx5IHJlY2VpdmVkIHRoZSByZXF1ZXN0LlxuICAgKiBAcGFyYW0gZGVsZWdhdGUgVGhlIGFyZ3VtZW50IHBhc3NlZCBpbnRvIHRoZSBgd3JhcGAgbWV0aG9kLlxuICAgKiBAcGFyYW0gc291cmNlIFRoZSBhcmd1bWVudCBwYXNzZWQgaW50byB0aGUgYHdyYXBgIG1ldGhvZC5cbiAgICovXG4gIG9uSW50ZXJjZXB0PzpcbiAgICAgIChwYXJlbnRab25lRGVsZWdhdGU6IFpvbmVEZWxlZ2F0ZSwgY3VycmVudFpvbmU6IFpvbmUsIHRhcmdldFpvbmU6IFpvbmUsIGRlbGVnYXRlOiBGdW5jdGlvbixcbiAgICAgICBzb3VyY2U6IHN0cmluZykgPT4gRnVuY3Rpb247XG5cbiAgLyoqXG4gICAqIEFsbG93cyBpbnRlcmNlcHRpb24gb2YgdGhlIGNhbGxiYWNrIGludm9jYXRpb24uXG4gICAqXG4gICAqIEBwYXJhbSBwYXJlbnRab25lRGVsZWdhdGUgRGVsZWdhdGUgd2hpY2ggcGVyZm9ybXMgdGhlIHBhcmVudCBbWm9uZVNwZWNdIG9wZXJhdGlvbi5cbiAgICogQHBhcmFtIGN1cnJlbnRab25lIFRoZSBjdXJyZW50IFtab25lXSB3aGVyZSB0aGUgY3VycmVudCBpbnRlcmNlcHRvciBoYXMgYmVlbiBkZWNsYXJlZC5cbiAgICogQHBhcmFtIHRhcmdldFpvbmUgVGhlIFtab25lXSB3aGljaCBvcmlnaW5hbGx5IHJlY2VpdmVkIHRoZSByZXF1ZXN0LlxuICAgKiBAcGFyYW0gZGVsZWdhdGUgVGhlIGFyZ3VtZW50IHBhc3NlZCBpbnRvIHRoZSBgcnVuYCBtZXRob2QuXG4gICAqIEBwYXJhbSBhcHBseVRoaXMgVGhlIGFyZ3VtZW50IHBhc3NlZCBpbnRvIHRoZSBgcnVuYCBtZXRob2QuXG4gICAqIEBwYXJhbSBhcHBseUFyZ3MgVGhlIGFyZ3VtZW50IHBhc3NlZCBpbnRvIHRoZSBgcnVuYCBtZXRob2QuXG4gICAqIEBwYXJhbSBzb3VyY2UgVGhlIGFyZ3VtZW50IHBhc3NlZCBpbnRvIHRoZSBgcnVuYCBtZXRob2QuXG4gICAqL1xuICBvbkludm9rZT86XG4gICAgICAocGFyZW50Wm9uZURlbGVnYXRlOiBab25lRGVsZWdhdGUsIGN1cnJlbnRab25lOiBab25lLCB0YXJnZXRab25lOiBab25lLCBkZWxlZ2F0ZTogRnVuY3Rpb24sXG4gICAgICAgYXBwbHlUaGlzOiBhbnksIGFwcGx5QXJncz86IGFueVtdLCBzb3VyY2U/OiBzdHJpbmcpID0+IGFueTtcblxuICAvKipcbiAgICogQWxsb3dzIGludGVyY2VwdGlvbiBvZiB0aGUgZXJyb3IgaGFuZGxpbmcuXG4gICAqXG4gICAqIEBwYXJhbSBwYXJlbnRab25lRGVsZWdhdGUgRGVsZWdhdGUgd2hpY2ggcGVyZm9ybXMgdGhlIHBhcmVudCBbWm9uZVNwZWNdIG9wZXJhdGlvbi5cbiAgICogQHBhcmFtIGN1cnJlbnRab25lIFRoZSBjdXJyZW50IFtab25lXSB3aGVyZSB0aGUgY3VycmVudCBpbnRlcmNlcHRvciBoYXMgYmVlbiBkZWNsYXJlZC5cbiAgICogQHBhcmFtIHRhcmdldFpvbmUgVGhlIFtab25lXSB3aGljaCBvcmlnaW5hbGx5IHJlY2VpdmVkIHRoZSByZXF1ZXN0LlxuICAgKiBAcGFyYW0gZXJyb3IgVGhlIGFyZ3VtZW50IHBhc3NlZCBpbnRvIHRoZSBgaGFuZGxlRXJyb3JgIG1ldGhvZC5cbiAgICovXG4gIG9uSGFuZGxlRXJyb3I/OlxuICAgICAgKHBhcmVudFpvbmVEZWxlZ2F0ZTogWm9uZURlbGVnYXRlLCBjdXJyZW50Wm9uZTogWm9uZSwgdGFyZ2V0Wm9uZTogWm9uZSxcbiAgICAgICBlcnJvcjogYW55KSA9PiBib29sZWFuO1xuXG4gIC8qKlxuICAgKiBBbGxvd3MgaW50ZXJjZXB0aW9uIG9mIHRhc2sgc2NoZWR1bGluZy5cbiAgICpcbiAgICogQHBhcmFtIHBhcmVudFpvbmVEZWxlZ2F0ZSBEZWxlZ2F0ZSB3aGljaCBwZXJmb3JtcyB0aGUgcGFyZW50IFtab25lU3BlY10gb3BlcmF0aW9uLlxuICAgKiBAcGFyYW0gY3VycmVudFpvbmUgVGhlIGN1cnJlbnQgW1pvbmVdIHdoZXJlIHRoZSBjdXJyZW50IGludGVyY2VwdG9yIGhhcyBiZWVuIGRlY2xhcmVkLlxuICAgKiBAcGFyYW0gdGFyZ2V0Wm9uZSBUaGUgW1pvbmVdIHdoaWNoIG9yaWdpbmFsbHkgcmVjZWl2ZWQgdGhlIHJlcXVlc3QuXG4gICAqIEBwYXJhbSB0YXNrIFRoZSBhcmd1bWVudCBwYXNzZWQgaW50byB0aGUgYHNjaGVkdWxlVGFza2AgbWV0aG9kLlxuICAgKi9cbiAgb25TY2hlZHVsZVRhc2s/OlxuICAgICAgKHBhcmVudFpvbmVEZWxlZ2F0ZTogWm9uZURlbGVnYXRlLCBjdXJyZW50Wm9uZTogWm9uZSwgdGFyZ2V0Wm9uZTogWm9uZSwgdGFzazogVGFzaykgPT4gVGFzaztcblxuICBvbkludm9rZVRhc2s/OlxuICAgICAgKHBhcmVudFpvbmVEZWxlZ2F0ZTogWm9uZURlbGVnYXRlLCBjdXJyZW50Wm9uZTogWm9uZSwgdGFyZ2V0Wm9uZTogWm9uZSwgdGFzazogVGFzayxcbiAgICAgICBhcHBseVRoaXM6IGFueSwgYXBwbHlBcmdzPzogYW55W10pID0+IGFueTtcblxuICAvKipcbiAgICogQWxsb3dzIGludGVyY2VwdGlvbiBvZiB0YXNrIGNhbmNlbGxhdGlvbi5cbiAgICpcbiAgICogQHBhcmFtIHBhcmVudFpvbmVEZWxlZ2F0ZSBEZWxlZ2F0ZSB3aGljaCBwZXJmb3JtcyB0aGUgcGFyZW50IFtab25lU3BlY10gb3BlcmF0aW9uLlxuICAgKiBAcGFyYW0gY3VycmVudFpvbmUgVGhlIGN1cnJlbnQgW1pvbmVdIHdoZXJlIHRoZSBjdXJyZW50IGludGVyY2VwdG9yIGhhcyBiZWVuIGRlY2xhcmVkLlxuICAgKiBAcGFyYW0gdGFyZ2V0Wm9uZSBUaGUgW1pvbmVdIHdoaWNoIG9yaWdpbmFsbHkgcmVjZWl2ZWQgdGhlIHJlcXVlc3QuXG4gICAqIEBwYXJhbSB0YXNrIFRoZSBhcmd1bWVudCBwYXNzZWQgaW50byB0aGUgYGNhbmNlbFRhc2tgIG1ldGhvZC5cbiAgICovXG4gIG9uQ2FuY2VsVGFzaz86XG4gICAgICAocGFyZW50Wm9uZURlbGVnYXRlOiBab25lRGVsZWdhdGUsIGN1cnJlbnRab25lOiBab25lLCB0YXJnZXRab25lOiBab25lLCB0YXNrOiBUYXNrKSA9PiBhbnk7XG5cbiAgLyoqXG4gICAqIE5vdGlmaWVzIG9mIGNoYW5nZXMgdG8gdGhlIHRhc2sgcXVldWUgZW1wdHkgc3RhdHVzLlxuICAgKlxuICAgKiBAcGFyYW0gcGFyZW50Wm9uZURlbGVnYXRlIERlbGVnYXRlIHdoaWNoIHBlcmZvcm1zIHRoZSBwYXJlbnQgW1pvbmVTcGVjXSBvcGVyYXRpb24uXG4gICAqIEBwYXJhbSBjdXJyZW50Wm9uZSBUaGUgY3VycmVudCBbWm9uZV0gd2hlcmUgdGhlIGN1cnJlbnQgaW50ZXJjZXB0b3IgaGFzIGJlZW4gZGVjbGFyZWQuXG4gICAqIEBwYXJhbSB0YXJnZXRab25lIFRoZSBbWm9uZV0gd2hpY2ggb3JpZ2luYWxseSByZWNlaXZlZCB0aGUgcmVxdWVzdC5cbiAgICogQHBhcmFtIGhhc1Rhc2tTdGF0ZVxuICAgKi9cbiAgb25IYXNUYXNrPzpcbiAgICAgIChwYXJlbnRab25lRGVsZWdhdGU6IFpvbmVEZWxlZ2F0ZSwgY3VycmVudFpvbmU6IFpvbmUsIHRhcmdldFpvbmU6IFpvbmUsXG4gICAgICAgaGFzVGFza1N0YXRlOiBIYXNUYXNrU3RhdGUpID0+IHZvaWQ7XG59XG5cblxuLyoqXG4gKiAgQSBkZWxlZ2F0ZSB3aGVuIGludGVyY2VwdGluZyB6b25lIG9wZXJhdGlvbnMuXG4gKlxuICogIEEgWm9uZURlbGVnYXRlIGlzIG5lZWRlZCBiZWNhdXNlIGEgY2hpbGQgem9uZSBjYW4ndCBzaW1wbHkgaW52b2tlIGEgbWV0aG9kIG9uIGEgcGFyZW50IHpvbmUuIEZvclxuICogIGV4YW1wbGUgYSBjaGlsZCB6b25lIHdyYXAgY2FuJ3QganVzdCBjYWxsIHBhcmVudCB6b25lIHdyYXAuIERvaW5nIHNvIHdvdWxkIGNyZWF0ZSBhIGNhbGxiYWNrXG4gKiAgd2hpY2ggaXMgYm91bmQgdG8gdGhlIHBhcmVudCB6b25lLiBXaGF0IHdlIGFyZSBpbnRlcmVzdGVkIGluIGlzIGludGVyY2VwdGluZyB0aGUgY2FsbGJhY2sgYmVmb3JlXG4gKiAgaXQgaXMgYm91bmQgdG8gYW55IHpvbmUuIEZ1cnRoZXJtb3JlLCB3ZSBhbHNvIG5lZWQgdG8gcGFzcyB0aGUgdGFyZ2V0Wm9uZSAoem9uZSB3aGljaCByZWNlaXZlZFxuICogIHRoZSBvcmlnaW5hbCByZXF1ZXN0KSB0byB0aGUgZGVsZWdhdGUuXG4gKlxuICogIFRoZSBab25lRGVsZWdhdGUgbWV0aG9kcyBtaXJyb3IgdGhvc2Ugb2YgWm9uZSB3aXRoIGFuIGFkZGl0aW9uIG9mIGV4dHJhIHRhcmdldFpvbmUgYXJndW1lbnQgaW5cbiAqICB0aGUgbWV0aG9kIHNpZ25hdHVyZS4gKFRoZSBvcmlnaW5hbCBab25lIHdoaWNoIHJlY2VpdmVkIHRoZSByZXF1ZXN0LikgU29tZSBtZXRob2RzIGFyZSByZW5hbWVkXG4gKiAgdG8gcHJldmVudCBjb25mdXNpb24sIGJlY2F1c2UgdGhleSBoYXZlIHNsaWdodGx5IGRpZmZlcmVudCBzZW1hbnRpY3MgYW5kIGFyZ3VtZW50cy5cbiAqXG4gKiAgLSBgd3JhcGAgPT4gYGludGVyY2VwdGA6IFRoZSBgd3JhcGAgbWV0aG9kIGRlbGVnYXRlcyB0byBgaW50ZXJjZXB0YC4gVGhlIGB3cmFwYCBtZXRob2QgcmV0dXJuc1xuICogICAgIGEgY2FsbGJhY2sgd2hpY2ggd2lsbCBydW4gaW4gYSBnaXZlbiB6b25lLCB3aGVyZSBhcyBpbnRlcmNlcHQgYWxsb3dzIHdyYXBwaW5nIHRoZSBjYWxsYmFja1xuICogICAgIHNvIHRoYXQgYWRkaXRpb25hbCBjb2RlIGNhbiBiZSBydW4gYmVmb3JlIGFuZCBhZnRlciwgYnV0IGRvZXMgbm90IGFzc29jaWF0ZSB0aGUgY2FsbGJhY2tcbiAqICAgICB3aXRoIHRoZSB6b25lLlxuICogIC0gYHJ1bmAgPT4gYGludm9rZWA6IFRoZSBgcnVuYCBtZXRob2QgZGVsZWdhdGVzIHRvIGBpbnZva2VgIHRvIHBlcmZvcm0gdGhlIGFjdHVhbCBleGVjdXRpb24gb2ZcbiAqICAgICB0aGUgY2FsbGJhY2suIFRoZSBgcnVuYCBtZXRob2Qgc3dpdGNoZXMgdG8gbmV3IHpvbmU7IHNhdmVzIGFuZCByZXN0b3JlcyB0aGUgYFpvbmUuY3VycmVudGA7XG4gKiAgICAgYW5kIG9wdGlvbmFsbHkgcGVyZm9ybXMgZXJyb3IgaGFuZGxpbmcuIFRoZSBpbnZva2UgaXMgbm90IHJlc3BvbnNpYmxlIGZvciBlcnJvciBoYW5kbGluZyxcbiAqICAgICBvciB6b25lIG1hbmFnZW1lbnQuXG4gKlxuICogIE5vdCBldmVyeSBtZXRob2QgaXMgdXN1YWxseSBvdmVyd3JpdHRlbiBpbiB0aGUgY2hpbGQgem9uZSwgZm9yIHRoaXMgcmVhc29uIHRoZSBab25lRGVsZWdhdGVcbiAqICBzdG9yZXMgdGhlIGNsb3Nlc3Qgem9uZSB3aGljaCBvdmVyd3JpdGVzIHRoaXMgYmVoYXZpb3IgYWxvbmcgd2l0aCB0aGUgY2xvc2VzdCBab25lU3BlYy5cbiAqXG4gKiAgTk9URTogV2UgaGF2ZSB0cmllZCB0byBtYWtlIHRoaXMgQVBJIGFuYWxvZ291cyB0byBFdmVudCBidWJibGluZyB3aXRoIHRhcmdldCBhbmQgY3VycmVudFxuICogIHByb3BlcnRpZXMuXG4gKlxuICogIE5vdGU6IFRoZSBab25lRGVsZWdhdGUgdHJlYXRzIFpvbmVTcGVjIGFzIGNsYXNzLiBUaGlzIGFsbG93cyB0aGUgWm9uZVNwZWMgdG8gdXNlIGl0cyBgdGhpc2AgdG9cbiAqICBzdG9yZSBpbnRlcm5hbCBzdGF0ZS5cbiAqL1xuaW50ZXJmYWNlIFpvbmVEZWxlZ2F0ZSB7XG4gIHpvbmU6IFpvbmU7XG4gIGZvcmsodGFyZ2V0Wm9uZTogWm9uZSwgem9uZVNwZWM6IFpvbmVTcGVjKTogWm9uZTtcbiAgaW50ZXJjZXB0KHRhcmdldFpvbmU6IFpvbmUsIGNhbGxiYWNrOiBGdW5jdGlvbiwgc291cmNlOiBzdHJpbmcpOiBGdW5jdGlvbjtcbiAgaW52b2tlKHRhcmdldFpvbmU6IFpvbmUsIGNhbGxiYWNrOiBGdW5jdGlvbiwgYXBwbHlUaGlzPzogYW55LCBhcHBseUFyZ3M/OiBhbnlbXSwgc291cmNlPzogc3RyaW5nKTpcbiAgICAgIGFueTtcbiAgaGFuZGxlRXJyb3IodGFyZ2V0Wm9uZTogWm9uZSwgZXJyb3I6IGFueSk6IGJvb2xlYW47XG4gIHNjaGVkdWxlVGFzayh0YXJnZXRab25lOiBab25lLCB0YXNrOiBUYXNrKTogVGFzaztcbiAgaW52b2tlVGFzayh0YXJnZXRab25lOiBab25lLCB0YXNrOiBUYXNrLCBhcHBseVRoaXM/OiBhbnksIGFwcGx5QXJncz86IGFueVtdKTogYW55O1xuICBjYW5jZWxUYXNrKHRhcmdldFpvbmU6IFpvbmUsIHRhc2s6IFRhc2spOiBhbnk7XG4gIGhhc1Rhc2sodGFyZ2V0Wm9uZTogWm9uZSwgaXNFbXB0eTogSGFzVGFza1N0YXRlKTogdm9pZDtcbn1cblxudHlwZSBIYXNUYXNrU3RhdGUgPSB7XG4gIG1pY3JvVGFzazogYm9vbGVhbjsgbWFjcm9UYXNrOiBib29sZWFuOyBldmVudFRhc2s6IGJvb2xlYW47IGNoYW5nZTogVGFza1R5cGU7XG59O1xuXG4vKipcbiAqIFRhc2sgdHlwZTogYG1pY3JvVGFza2AsIGBtYWNyb1Rhc2tgLCBgZXZlbnRUYXNrYC5cbiAqL1xudHlwZSBUYXNrVHlwZSA9ICdtaWNyb1Rhc2snIHwgJ21hY3JvVGFzaycgfCAnZXZlbnRUYXNrJztcblxuLyoqXG4gKiBUYXNrIHR5cGU6IGBub3RTY2hlZHVsZWRgLCBgc2NoZWR1bGluZ2AsIGBzY2hlZHVsZWRgLCBgcnVubmluZ2AsIGBjYW5jZWxpbmdgLCAndW5rbm93bicuXG4gKi9cbnR5cGUgVGFza1N0YXRlID0gJ25vdFNjaGVkdWxlZCcgfCAnc2NoZWR1bGluZycgfCAnc2NoZWR1bGVkJyB8ICdydW5uaW5nJyB8ICdjYW5jZWxpbmcnIHwgJ3Vua25vd24nO1xuXG5cbi8qKlxuICovXG5pbnRlcmZhY2UgVGFza0RhdGEge1xuICAvKipcbiAgICogQSBwZXJpb2RpYyBbTWFjcm9UYXNrXSBpcyBzdWNoIHdoaWNoIGdldCBhdXRvbWF0aWNhbGx5IHJlc2NoZWR1bGVkIGFmdGVyIGl0IGlzIGV4ZWN1dGVkLlxuICAgKi9cbiAgaXNQZXJpb2RpYz86IGJvb2xlYW47XG5cbiAgLyoqXG4gICAqIERlbGF5IGluIG1pbGxpc2Vjb25kcyB3aGVuIHRoZSBUYXNrIHdpbGwgcnVuLlxuICAgKi9cbiAgZGVsYXk/OiBudW1iZXI7XG5cbiAgLyoqXG4gICAqIGlkZW50aWZpZXIgcmV0dXJuZWQgYnkgdGhlIG5hdGl2ZSBzZXRUaW1lb3V0LlxuICAgKi9cbiAgaGFuZGxlSWQ/OiBudW1iZXI7XG59XG5cbi8qKlxuICogUmVwcmVzZW50cyB3b3JrIHdoaWNoIGlzIGV4ZWN1dGVkIHdpdGggYSBjbGVhbiBzdGFjay5cbiAqXG4gKiBUYXNrcyBhcmUgdXNlZCBpbiBab25lcyB0byBtYXJrIHdvcmsgd2hpY2ggaXMgcGVyZm9ybWVkIG9uIGNsZWFuIHN0YWNrIGZyYW1lLiBUaGVyZSBhcmUgdGhyZWVcbiAqIGtpbmRzIG9mIHRhc2suIFtNaWNyb1Rhc2tdLCBbTWFjcm9UYXNrXSwgYW5kIFtFdmVudFRhc2tdLlxuICpcbiAqIEEgSlMgVk0gY2FuIGJlIG1vZGVsZWQgYXMgYSBbTWljcm9UYXNrXSBxdWV1ZSwgW01hY3JvVGFza10gcXVldWUsIGFuZCBbRXZlbnRUYXNrXSBzZXQuXG4gKlxuICogLSBbTWljcm9UYXNrXSBxdWV1ZSByZXByZXNlbnRzIGEgc2V0IG9mIHRhc2tzIHdoaWNoIGFyZSBleGVjdXRpbmcgcmlnaHQgYWZ0ZXIgdGhlIGN1cnJlbnQgc3RhY2tcbiAqICAgZnJhbWUgYmVjb21lcyBjbGVhbiBhbmQgYmVmb3JlIGEgVk0geWllbGQuIEFsbCBbTWljcm9UYXNrXXMgZXhlY3V0ZSBpbiBvcmRlciBvZiBpbnNlcnRpb25cbiAqICAgYmVmb3JlIFZNIHlpZWxkIGFuZCB0aGUgbmV4dCBbTWFjcm9UYXNrXSBpcyBleGVjdXRlZC5cbiAqIC0gW01hY3JvVGFza10gcXVldWUgcmVwcmVzZW50cyBhIHNldCBvZiB0YXNrcyB3aGljaCBhcmUgZXhlY3V0ZWQgb25lIGF0IGEgdGltZSBhZnRlciBlYWNoIFZNXG4gKiAgIHlpZWxkLiBUaGUgcXVldWUgaXMgb3JkZXJlZCBieSB0aW1lLCBhbmQgaW5zZXJ0aW9ucyBjYW4gaGFwcGVuIGluIGFueSBsb2NhdGlvbi5cbiAqIC0gW0V2ZW50VGFza10gaXMgYSBzZXQgb2YgdGFza3Mgd2hpY2ggY2FuIGF0IGFueSB0aW1lIGJlIGluc2VydGVkIHRvIHRoZSBlbmQgb2YgdGhlIFtNYWNyb1Rhc2tdXG4gKiAgIHF1ZXVlLiBUaGlzIGhhcHBlbnMgd2hlbiB0aGUgZXZlbnQgZmlyZXMuXG4gKlxuICovXG5pbnRlcmZhY2UgVGFzayB7XG4gIC8qKlxuICAgKiBUYXNrIHR5cGU6IGBtaWNyb1Rhc2tgLCBgbWFjcm9UYXNrYCwgYGV2ZW50VGFza2AuXG4gICAqL1xuICB0eXBlOiBUYXNrVHlwZTtcblxuICAvKipcbiAgICogVGFzayBzdGF0ZTogYG5vdFNjaGVkdWxlZGAsIGBzY2hlZHVsaW5nYCwgYHNjaGVkdWxlZGAsIGBydW5uaW5nYCwgYGNhbmNlbGluZ2AsIGB1bmtub3duYC5cbiAgICovXG4gIHN0YXRlOiBUYXNrU3RhdGU7XG5cbiAgLyoqXG4gICAqIERlYnVnIHN0cmluZyByZXByZXNlbnRpbmcgdGhlIEFQSSB3aGljaCByZXF1ZXN0ZWQgdGhlIHNjaGVkdWxpbmcgb2YgdGhlIHRhc2suXG4gICAqL1xuICBzb3VyY2U6IHN0cmluZztcblxuICAvKipcbiAgICogVGhlIEZ1bmN0aW9uIHRvIGJlIHVzZWQgYnkgdGhlIFZNIHVwb24gZW50ZXJpbmcgdGhlIFtUYXNrXS4gVGhpcyBmdW5jdGlvbiB3aWxsIGRlbGVnYXRlIHRvXG4gICAqIFtab25lLnJ1blRhc2tdIGFuZCBkZWxlZ2F0ZSB0byBgY2FsbGJhY2tgLlxuICAgKi9cbiAgaW52b2tlOiBGdW5jdGlvbjtcblxuICAvKipcbiAgICogRnVuY3Rpb24gd2hpY2ggbmVlZHMgdG8gYmUgZXhlY3V0ZWQgYnkgdGhlIFRhc2sgYWZ0ZXIgdGhlIFtab25lLmN1cnJlbnRUYXNrXSBoYXMgYmVlbiBzZXQgdG9cbiAgICogdGhlIGN1cnJlbnQgdGFzay5cbiAgICovXG4gIGNhbGxiYWNrOiBGdW5jdGlvbjtcblxuICAvKipcbiAgICogVGFzayBzcGVjaWZpYyBvcHRpb25zIGFzc29jaWF0ZWQgd2l0aCB0aGUgY3VycmVudCB0YXNrLiBUaGlzIGlzIHBhc3NlZCB0byB0aGUgYHNjaGVkdWxlRm5gLlxuICAgKi9cbiAgZGF0YT86IFRhc2tEYXRhO1xuXG4gIC8qKlxuICAgKiBSZXByZXNlbnRzIHRoZSBkZWZhdWx0IHdvcmsgd2hpY2ggbmVlZHMgdG8gYmUgZG9uZSB0byBzY2hlZHVsZSB0aGUgVGFzayBieSB0aGUgVk0uXG4gICAqXG4gICAqIEEgem9uZSBtYXkgY2hvb3NlIHRvIGludGVyY2VwdCB0aGlzIGZ1bmN0aW9uIGFuZCBwZXJmb3JtIGl0cyBvd24gc2NoZWR1bGluZy5cbiAgICovXG4gIHNjaGVkdWxlRm4/OiAodGFzazogVGFzaykgPT4gdm9pZDtcblxuICAvKipcbiAgICogUmVwcmVzZW50cyB0aGUgZGVmYXVsdCB3b3JrIHdoaWNoIG5lZWRzIHRvIGJlIGRvbmUgdG8gdW4tc2NoZWR1bGUgdGhlIFRhc2sgZnJvbSB0aGUgVk0uIE5vdCBhbGxcbiAgICogVGFza3MgYXJlIGNhbmNlbGFibGUsIGFuZCB0aGVyZWZvcmUgdGhpcyBtZXRob2QgaXMgb3B0aW9uYWwuXG4gICAqXG4gICAqIEEgem9uZSBtYXkgY2hvc2UgdG8gaW50ZXJjZXB0IHRoaXMgZnVuY3Rpb24gYW5kIHBlcmZvcm0gaXRzIG93biB1bi1zY2hlZHVsaW5nLlxuICAgKi9cbiAgY2FuY2VsRm4/OiAodGFzazogVGFzaykgPT4gdm9pZDtcblxuICAvKipcbiAgICogQHR5cGUge1pvbmV9IFRoZSB6b25lIHdoaWNoIHdpbGwgYmUgdXNlZCB0byBpbnZva2UgdGhlIGBjYWxsYmFja2AuIFRoZSBab25lIGlzIGNhcHR1cmVkXG4gICAqIGF0IHRoZSB0aW1lIG9mIFRhc2sgY3JlYXRpb24uXG4gICAqL1xuICByZWFkb25seSB6b25lOiBab25lO1xuXG4gIC8qKlxuICAgKiBOdW1iZXIgb2YgdGltZXMgdGhlIHRhc2sgaGFzIGJlZW4gZXhlY3V0ZWQsIG9yIC0xIGlmIGNhbmNlbGVkLlxuICAgKi9cbiAgcnVuQ291bnQ6IG51bWJlcjtcblxuICAvKipcbiAgICogQ2FuY2VsIHRoZSBzY2hlZHVsaW5nIHJlcXVlc3QuIFRoaXMgbWV0aG9kIGNhbiBiZSBjYWxsZWQgZnJvbSBgWm9uZVNwZWMub25TY2hlZHVsZVRhc2tgIHRvXG4gICAqIGNhbmNlbCB0aGUgY3VycmVudCBzY2hlZHVsaW5nIGludGVyY2VwdGlvbi4gT25jZSBjYW5jZWxlZCB0aGUgdGFzayBjYW4gYmUgZGlzY2FyZGVkIG9yXG4gICAqIHJlc2NoZWR1bGVkIHVzaW5nIGBab25lLnNjaGVkdWxlVGFza2Agb24gYSBkaWZmZXJlbnQgem9uZS5cbiAgICovXG4gIGNhbmNlbFNjaGVkdWxlUmVxdWVzdCgpOiB2b2lkO1xufVxuXG5pbnRlcmZhY2UgTWljcm9UYXNrIGV4dGVuZHMgVGFzayB7XG4gIHR5cGU6ICdtaWNyb1Rhc2snO1xufVxuXG5pbnRlcmZhY2UgTWFjcm9UYXNrIGV4dGVuZHMgVGFzayB7XG4gIHR5cGU6ICdtYWNyb1Rhc2snO1xufVxuXG5pbnRlcmZhY2UgRXZlbnRUYXNrIGV4dGVuZHMgVGFzayB7XG4gIHR5cGU6ICdldmVudFRhc2snO1xufVxuXG4vKiogQGludGVybmFsICovXG50eXBlIEFtYmllbnRab25lID0gWm9uZTtcbi8qKiBAaW50ZXJuYWwgKi9cbnR5cGUgQW1iaWVudFpvbmVEZWxlZ2F0ZSA9IFpvbmVEZWxlZ2F0ZTtcblxuY29uc3QgWm9uZTogWm9uZVR5cGUgPSAoZnVuY3Rpb24oZ2xvYmFsOiBhbnkpIHtcbiAgY29uc3QgcGVyZm9ybWFuY2U6IHttYXJrKG5hbWU6IHN0cmluZyk6IHZvaWQ7IG1lYXN1cmUobmFtZTogc3RyaW5nLCBsYWJlbDogc3RyaW5nKTogdm9pZDt9ID1cbiAgICAgIGdsb2JhbFsncGVyZm9ybWFuY2UnXTtcbiAgZnVuY3Rpb24gbWFyayhuYW1lOiBzdHJpbmcpIHsgcGVyZm9ybWFuY2UgJiYgcGVyZm9ybWFuY2VbJ21hcmsnXSAmJiBwZXJmb3JtYW5jZVsnbWFyayddKG5hbWUpOyB9XG4gIGZ1bmN0aW9uIHBlcmZvcm1hbmNlTWVhc3VyZShuYW1lOiBzdHJpbmcsIGxhYmVsOiBzdHJpbmcpIHtcbiAgICBwZXJmb3JtYW5jZSAmJiBwZXJmb3JtYW5jZVsnbWVhc3VyZSddICYmIHBlcmZvcm1hbmNlWydtZWFzdXJlJ10obmFtZSwgbGFiZWwpO1xuICB9XG4gIG1hcmsoJ1pvbmUnKTtcblxuICAvLyBJbml0aWFsaXplIGJlZm9yZSBpdCdzIGFjY2Vzc2VkIGJlbG93LlxuICAvLyBfX1pvbmVfc3ltYm9sX3ByZWZpeCBnbG9iYWwgY2FuIGJlIHVzZWQgdG8gb3ZlcnJpZGUgdGhlIGRlZmF1bHQgem9uZVxuICAvLyBzeW1ib2wgcHJlZml4IHdpdGggYSBjdXN0b20gb25lIGlmIG5lZWRlZC5cbiAgY29uc3Qgc3ltYm9sUHJlZml4ID0gZ2xvYmFsWydfX1pvbmVfc3ltYm9sX3ByZWZpeCddIHx8ICdfX3pvbmVfc3ltYm9sX18nO1xuXG4gIGZ1bmN0aW9uIF9fc3ltYm9sX18obmFtZTogc3RyaW5nKSB7IHJldHVybiBzeW1ib2xQcmVmaXggKyBuYW1lOyB9XG5cbiAgY29uc3QgY2hlY2tEdXBsaWNhdGUgPSBnbG9iYWxbX19zeW1ib2xfXygnZm9yY2VEdXBsaWNhdGVab25lQ2hlY2snKV0gPT09IHRydWU7XG4gIGlmIChnbG9iYWxbJ1pvbmUnXSkge1xuICAgIC8vIGlmIGdsb2JhbFsnWm9uZSddIGFscmVhZHkgZXhpc3RzIChtYXliZSB6b25lLmpzIHdhcyBhbHJlYWR5IGxvYWRlZCBvclxuICAgIC8vIHNvbWUgb3RoZXIgbGliIGFsc28gcmVnaXN0ZXJlZCBhIGdsb2JhbCBvYmplY3QgbmFtZWQgWm9uZSksIHdlIG1heSBuZWVkXG4gICAgLy8gdG8gdGhyb3cgYW4gZXJyb3IsIGJ1dCBzb21ldGltZXMgdXNlciBtYXkgbm90IHdhbnQgdGhpcyBlcnJvci5cbiAgICAvLyBGb3IgZXhhbXBsZSxcbiAgICAvLyB3ZSBoYXZlIHR3byB3ZWIgcGFnZXMsIHBhZ2UxIGluY2x1ZGVzIHpvbmUuanMsIHBhZ2UyIGRvZXNuJ3QuXG4gICAgLy8gYW5kIHRoZSAxc3QgdGltZSB1c2VyIGxvYWQgcGFnZTEgYW5kIHBhZ2UyLCBldmVyeXRoaW5nIHdvcmsgZmluZSxcbiAgICAvLyBidXQgd2hlbiB1c2VyIGxvYWQgcGFnZTIgYWdhaW4sIGVycm9yIG9jY3VycyBiZWNhdXNlIGdsb2JhbFsnWm9uZSddIGFscmVhZHkgZXhpc3RzLlxuICAgIC8vIHNvIHdlIGFkZCBhIGZsYWcgdG8gbGV0IHVzZXIgY2hvb3NlIHdoZXRoZXIgdG8gdGhyb3cgdGhpcyBlcnJvciBvciBub3QuXG4gICAgLy8gQnkgZGVmYXVsdCwgaWYgZXhpc3RpbmcgWm9uZSBpcyBmcm9tIHpvbmUuanMsIHdlIHdpbGwgbm90IHRocm93IHRoZSBlcnJvci5cbiAgICBpZiAoY2hlY2tEdXBsaWNhdGUgfHwgdHlwZW9mIGdsb2JhbFsnWm9uZSddLl9fc3ltYm9sX18gIT09ICdmdW5jdGlvbicpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignWm9uZSBhbHJlYWR5IGxvYWRlZC4nKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIGdsb2JhbFsnWm9uZSddO1xuICAgIH1cbiAgfVxuXG4gIGNsYXNzIFpvbmUgaW1wbGVtZW50cyBBbWJpZW50Wm9uZSB7XG4gICAgc3RhdGljIF9fc3ltYm9sX186IChuYW1lOiBzdHJpbmcpID0+IHN0cmluZyA9IF9fc3ltYm9sX187XG5cbiAgICBzdGF0aWMgYXNzZXJ0Wm9uZVBhdGNoZWQoKSB7XG4gICAgICBpZiAoZ2xvYmFsWydQcm9taXNlJ10gIT09IHBhdGNoZXNbJ1pvbmVBd2FyZVByb21pc2UnXSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgICAgICAnWm9uZS5qcyBoYXMgZGV0ZWN0ZWQgdGhhdCBab25lQXdhcmVQcm9taXNlIGAod2luZG93fGdsb2JhbCkuUHJvbWlzZWAgJyArXG4gICAgICAgICAgICAnaGFzIGJlZW4gb3ZlcndyaXR0ZW4uXFxuJyArXG4gICAgICAgICAgICAnTW9zdCBsaWtlbHkgY2F1c2UgaXMgdGhhdCBhIFByb21pc2UgcG9seWZpbGwgaGFzIGJlZW4gbG9hZGVkICcgK1xuICAgICAgICAgICAgJ2FmdGVyIFpvbmUuanMgKFBvbHlmaWxsaW5nIFByb21pc2UgYXBpIGlzIG5vdCBuZWNlc3Nhcnkgd2hlbiB6b25lLmpzIGlzIGxvYWRlZC4gJyArXG4gICAgICAgICAgICAnSWYgeW91IG11c3QgbG9hZCBvbmUsIGRvIHNvIGJlZm9yZSBsb2FkaW5nIHpvbmUuanMuKScpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHN0YXRpYyBnZXQgcm9vdCgpOiBBbWJpZW50Wm9uZSB7XG4gICAgICBsZXQgem9uZSA9IFpvbmUuY3VycmVudDtcbiAgICAgIHdoaWxlICh6b25lLnBhcmVudCkge1xuICAgICAgICB6b25lID0gem9uZS5wYXJlbnQ7XG4gICAgICB9XG4gICAgICByZXR1cm4gem9uZTtcbiAgICB9XG5cbiAgICBzdGF0aWMgZ2V0IGN1cnJlbnQoKTogQW1iaWVudFpvbmUgeyByZXR1cm4gX2N1cnJlbnRab25lRnJhbWUuem9uZTsgfVxuXG4gICAgc3RhdGljIGdldCBjdXJyZW50VGFzaygpOiBUYXNrfG51bGwgeyByZXR1cm4gX2N1cnJlbnRUYXNrOyB9XG5cbiAgICBzdGF0aWMgX19sb2FkX3BhdGNoKG5hbWU6IHN0cmluZywgZm46IF9QYXRjaEZuKTogdm9pZCB7XG4gICAgICBpZiAocGF0Y2hlcy5oYXNPd25Qcm9wZXJ0eShuYW1lKSkge1xuICAgICAgICBpZiAoY2hlY2tEdXBsaWNhdGUpIHtcbiAgICAgICAgICB0aHJvdyBFcnJvcignQWxyZWFkeSBsb2FkZWQgcGF0Y2g6ICcgKyBuYW1lKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmICghZ2xvYmFsWydfX1pvbmVfZGlzYWJsZV8nICsgbmFtZV0pIHtcbiAgICAgICAgY29uc3QgcGVyZk5hbWUgPSAnWm9uZTonICsgbmFtZTtcbiAgICAgICAgbWFyayhwZXJmTmFtZSk7XG4gICAgICAgIHBhdGNoZXNbbmFtZV0gPSBmbihnbG9iYWwsIFpvbmUsIF9hcGkpO1xuICAgICAgICBwZXJmb3JtYW5jZU1lYXN1cmUocGVyZk5hbWUsIHBlcmZOYW1lKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBwdWJsaWMgZ2V0IHBhcmVudCgpOiBBbWJpZW50Wm9uZXxudWxsIHsgcmV0dXJuIHRoaXMuX3BhcmVudDsgfVxuXG4gICAgcHVibGljIGdldCBuYW1lKCk6IHN0cmluZyB7IHJldHVybiB0aGlzLl9uYW1lOyB9XG5cblxuICAgIHByaXZhdGUgX3BhcmVudDogWm9uZXxudWxsO1xuICAgIHByaXZhdGUgX25hbWU6IHN0cmluZztcbiAgICBwcml2YXRlIF9wcm9wZXJ0aWVzOiB7W2tleTogc3RyaW5nXTogYW55fTtcbiAgICBwcml2YXRlIF96b25lRGVsZWdhdGU6IFpvbmVEZWxlZ2F0ZTtcblxuICAgIGNvbnN0cnVjdG9yKHBhcmVudDogWm9uZXxudWxsLCB6b25lU3BlYzogWm9uZVNwZWN8bnVsbCkge1xuICAgICAgdGhpcy5fcGFyZW50ID0gcGFyZW50O1xuICAgICAgdGhpcy5fbmFtZSA9IHpvbmVTcGVjID8gem9uZVNwZWMubmFtZSB8fCAndW5uYW1lZCcgOiAnPHJvb3Q+JztcbiAgICAgIHRoaXMuX3Byb3BlcnRpZXMgPSB6b25lU3BlYyAmJiB6b25lU3BlYy5wcm9wZXJ0aWVzIHx8IHt9O1xuICAgICAgdGhpcy5fem9uZURlbGVnYXRlID1cbiAgICAgICAgICBuZXcgWm9uZURlbGVnYXRlKHRoaXMsIHRoaXMuX3BhcmVudCAmJiB0aGlzLl9wYXJlbnQuX3pvbmVEZWxlZ2F0ZSwgem9uZVNwZWMpO1xuICAgIH1cblxuICAgIHB1YmxpYyBnZXQoa2V5OiBzdHJpbmcpOiBhbnkge1xuICAgICAgY29uc3Qgem9uZTogWm9uZSA9IHRoaXMuZ2V0Wm9uZVdpdGgoa2V5KSBhcyBab25lO1xuICAgICAgaWYgKHpvbmUpIHJldHVybiB6b25lLl9wcm9wZXJ0aWVzW2tleV07XG4gICAgfVxuXG4gICAgcHVibGljIGdldFpvbmVXaXRoKGtleTogc3RyaW5nKTogQW1iaWVudFpvbmV8bnVsbCB7XG4gICAgICBsZXQgY3VycmVudDogWm9uZXxudWxsID0gdGhpcztcbiAgICAgIHdoaWxlIChjdXJyZW50KSB7XG4gICAgICAgIGlmIChjdXJyZW50Ll9wcm9wZXJ0aWVzLmhhc093blByb3BlcnR5KGtleSkpIHtcbiAgICAgICAgICByZXR1cm4gY3VycmVudDtcbiAgICAgICAgfVxuICAgICAgICBjdXJyZW50ID0gY3VycmVudC5fcGFyZW50O1xuICAgICAgfVxuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgcHVibGljIGZvcmsoem9uZVNwZWM6IFpvbmVTcGVjKTogQW1iaWVudFpvbmUge1xuICAgICAgaWYgKCF6b25lU3BlYykgdGhyb3cgbmV3IEVycm9yKCdab25lU3BlYyByZXF1aXJlZCEnKTtcbiAgICAgIHJldHVybiB0aGlzLl96b25lRGVsZWdhdGUuZm9yayh0aGlzLCB6b25lU3BlYyk7XG4gICAgfVxuXG4gICAgcHVibGljIHdyYXA8VCBleHRlbmRzIEZ1bmN0aW9uPihjYWxsYmFjazogVCwgc291cmNlOiBzdHJpbmcpOiBUIHtcbiAgICAgIGlmICh0eXBlb2YgY2FsbGJhY2sgIT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdFeHBlY3RpbmcgZnVuY3Rpb24gZ290OiAnICsgY2FsbGJhY2spO1xuICAgICAgfVxuICAgICAgY29uc3QgX2NhbGxiYWNrID0gdGhpcy5fem9uZURlbGVnYXRlLmludGVyY2VwdCh0aGlzLCBjYWxsYmFjaywgc291cmNlKTtcbiAgICAgIGNvbnN0IHpvbmU6IFpvbmUgPSB0aGlzO1xuICAgICAgcmV0dXJuIGZ1bmN0aW9uKHRoaXM6IHVua25vd24pIHtcbiAgICAgICAgcmV0dXJuIHpvbmUucnVuR3VhcmRlZChfY2FsbGJhY2ssIHRoaXMsIDxhbnk+YXJndW1lbnRzLCBzb3VyY2UpO1xuICAgICAgfSBhcyBhbnkgYXMgVDtcbiAgICB9XG5cbiAgICBwdWJsaWMgcnVuKGNhbGxiYWNrOiBGdW5jdGlvbiwgYXBwbHlUaGlzPzogYW55LCBhcHBseUFyZ3M/OiBhbnlbXSwgc291cmNlPzogc3RyaW5nKTogYW55O1xuICAgIHB1YmxpYyBydW48VD4oXG4gICAgICAgIGNhbGxiYWNrOiAoLi4uYXJnczogYW55W10pID0+IFQsIGFwcGx5VGhpcz86IGFueSwgYXBwbHlBcmdzPzogYW55W10sIHNvdXJjZT86IHN0cmluZyk6IFQge1xuICAgICAgX2N1cnJlbnRab25lRnJhbWUgPSB7cGFyZW50OiBfY3VycmVudFpvbmVGcmFtZSwgem9uZTogdGhpc307XG4gICAgICB0cnkge1xuICAgICAgICByZXR1cm4gdGhpcy5fem9uZURlbGVnYXRlLmludm9rZSh0aGlzLCBjYWxsYmFjaywgYXBwbHlUaGlzLCBhcHBseUFyZ3MsIHNvdXJjZSk7XG4gICAgICB9IGZpbmFsbHkge1xuICAgICAgICBfY3VycmVudFpvbmVGcmFtZSA9IF9jdXJyZW50Wm9uZUZyYW1lLnBhcmVudCAhO1xuICAgICAgfVxuICAgIH1cblxuICAgIHB1YmxpYyBydW5HdWFyZGVkKGNhbGxiYWNrOiBGdW5jdGlvbiwgYXBwbHlUaGlzPzogYW55LCBhcHBseUFyZ3M/OiBhbnlbXSwgc291cmNlPzogc3RyaW5nKTogYW55O1xuICAgIHB1YmxpYyBydW5HdWFyZGVkPFQ+KFxuICAgICAgICBjYWxsYmFjazogKC4uLmFyZ3M6IGFueVtdKSA9PiBULCBhcHBseVRoaXM6IGFueSA9IG51bGwsIGFwcGx5QXJncz86IGFueVtdLFxuICAgICAgICBzb3VyY2U/OiBzdHJpbmcpIHtcbiAgICAgIF9jdXJyZW50Wm9uZUZyYW1lID0ge3BhcmVudDogX2N1cnJlbnRab25lRnJhbWUsIHpvbmU6IHRoaXN9O1xuICAgICAgdHJ5IHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICByZXR1cm4gdGhpcy5fem9uZURlbGVnYXRlLmludm9rZSh0aGlzLCBjYWxsYmFjaywgYXBwbHlUaGlzLCBhcHBseUFyZ3MsIHNvdXJjZSk7XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgaWYgKHRoaXMuX3pvbmVEZWxlZ2F0ZS5oYW5kbGVFcnJvcih0aGlzLCBlcnJvcikpIHtcbiAgICAgICAgICAgIHRocm93IGVycm9yO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgX2N1cnJlbnRab25lRnJhbWUgPSBfY3VycmVudFpvbmVGcmFtZS5wYXJlbnQgITtcbiAgICAgIH1cbiAgICB9XG5cblxuICAgIHJ1blRhc2sodGFzazogVGFzaywgYXBwbHlUaGlzPzogYW55LCBhcHBseUFyZ3M/OiBhbnkpOiBhbnkge1xuICAgICAgaWYgKHRhc2suem9uZSAhPSB0aGlzKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgICAgICdBIHRhc2sgY2FuIG9ubHkgYmUgcnVuIGluIHRoZSB6b25lIG9mIGNyZWF0aW9uISAoQ3JlYXRpb246ICcgK1xuICAgICAgICAgICAgKHRhc2suem9uZSB8fCBOT19aT05FKS5uYW1lICsgJzsgRXhlY3V0aW9uOiAnICsgdGhpcy5uYW1lICsgJyknKTtcbiAgICAgIH1cbiAgICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9hbmd1bGFyL3pvbmUuanMvaXNzdWVzLzc3OCwgc29tZXRpbWVzIGV2ZW50VGFza1xuICAgICAgLy8gd2lsbCBydW4gaW4gbm90U2NoZWR1bGVkKGNhbmNlbGVkKSBzdGF0ZSwgd2Ugc2hvdWxkIG5vdCB0cnkgdG9cbiAgICAgIC8vIHJ1biBzdWNoIGtpbmQgb2YgdGFzayBidXQganVzdCByZXR1cm5cblxuICAgICAgaWYgKHRhc2suc3RhdGUgPT09IG5vdFNjaGVkdWxlZCAmJiAodGFzay50eXBlID09PSBldmVudFRhc2sgfHwgdGFzay50eXBlID09PSBtYWNyb1Rhc2spKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgY29uc3QgcmVFbnRyeUd1YXJkID0gdGFzay5zdGF0ZSAhPSBydW5uaW5nO1xuICAgICAgcmVFbnRyeUd1YXJkICYmICh0YXNrIGFzIFpvbmVUYXNrPGFueT4pLl90cmFuc2l0aW9uVG8ocnVubmluZywgc2NoZWR1bGVkKTtcbiAgICAgIHRhc2sucnVuQ291bnQrKztcbiAgICAgIGNvbnN0IHByZXZpb3VzVGFzayA9IF9jdXJyZW50VGFzaztcbiAgICAgIF9jdXJyZW50VGFzayA9IHRhc2s7XG4gICAgICBfY3VycmVudFpvbmVGcmFtZSA9IHtwYXJlbnQ6IF9jdXJyZW50Wm9uZUZyYW1lLCB6b25lOiB0aGlzfTtcbiAgICAgIHRyeSB7XG4gICAgICAgIGlmICh0YXNrLnR5cGUgPT0gbWFjcm9UYXNrICYmIHRhc2suZGF0YSAmJiAhdGFzay5kYXRhLmlzUGVyaW9kaWMpIHtcbiAgICAgICAgICB0YXNrLmNhbmNlbEZuID0gdW5kZWZpbmVkO1xuICAgICAgICB9XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgcmV0dXJuIHRoaXMuX3pvbmVEZWxlZ2F0ZS5pbnZva2VUYXNrKHRoaXMsIHRhc2ssIGFwcGx5VGhpcywgYXBwbHlBcmdzKTtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICBpZiAodGhpcy5fem9uZURlbGVnYXRlLmhhbmRsZUVycm9yKHRoaXMsIGVycm9yKSkge1xuICAgICAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9IGZpbmFsbHkge1xuICAgICAgICAvLyBpZiB0aGUgdGFzaydzIHN0YXRlIGlzIG5vdFNjaGVkdWxlZCBvciB1bmtub3duLCB0aGVuIGl0IGhhcyBhbHJlYWR5IGJlZW4gY2FuY2VsbGVkXG4gICAgICAgIC8vIHdlIHNob3VsZCBub3QgcmVzZXQgdGhlIHN0YXRlIHRvIHNjaGVkdWxlZFxuICAgICAgICBpZiAodGFzay5zdGF0ZSAhPT0gbm90U2NoZWR1bGVkICYmIHRhc2suc3RhdGUgIT09IHVua25vd24pIHtcbiAgICAgICAgICBpZiAodGFzay50eXBlID09IGV2ZW50VGFzayB8fCAodGFzay5kYXRhICYmIHRhc2suZGF0YS5pc1BlcmlvZGljKSkge1xuICAgICAgICAgICAgcmVFbnRyeUd1YXJkICYmICh0YXNrIGFzIFpvbmVUYXNrPGFueT4pLl90cmFuc2l0aW9uVG8oc2NoZWR1bGVkLCBydW5uaW5nKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGFzay5ydW5Db3VudCA9IDA7XG4gICAgICAgICAgICB0aGlzLl91cGRhdGVUYXNrQ291bnQodGFzayBhcyBab25lVGFzazxhbnk+LCAtMSk7XG4gICAgICAgICAgICByZUVudHJ5R3VhcmQgJiZcbiAgICAgICAgICAgICAgICAodGFzayBhcyBab25lVGFzazxhbnk+KS5fdHJhbnNpdGlvblRvKG5vdFNjaGVkdWxlZCwgcnVubmluZywgbm90U2NoZWR1bGVkKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgX2N1cnJlbnRab25lRnJhbWUgPSBfY3VycmVudFpvbmVGcmFtZS5wYXJlbnQgITtcbiAgICAgICAgX2N1cnJlbnRUYXNrID0gcHJldmlvdXNUYXNrO1xuICAgICAgfVxuICAgIH1cblxuICAgIHNjaGVkdWxlVGFzazxUIGV4dGVuZHMgVGFzaz4odGFzazogVCk6IFQge1xuICAgICAgaWYgKHRhc2suem9uZSAmJiB0YXNrLnpvbmUgIT09IHRoaXMpIHtcbiAgICAgICAgLy8gY2hlY2sgaWYgdGhlIHRhc2sgd2FzIHJlc2NoZWR1bGVkLCB0aGUgbmV3Wm9uZVxuICAgICAgICAvLyBzaG91bGQgbm90IGJlIHRoZSBjaGlsZHJlbiBvZiB0aGUgb3JpZ2luYWwgem9uZVxuICAgICAgICBsZXQgbmV3Wm9uZTogYW55ID0gdGhpcztcbiAgICAgICAgd2hpbGUgKG5ld1pvbmUpIHtcbiAgICAgICAgICBpZiAobmV3Wm9uZSA9PT0gdGFzay56b25lKSB7XG4gICAgICAgICAgICB0aHJvdyBFcnJvcihgY2FuIG5vdCByZXNjaGVkdWxlIHRhc2sgdG8gJHtcbiAgICAgICAgICAgICAgICB0aGlzLm5hbWV9IHdoaWNoIGlzIGRlc2NlbmRhbnRzIG9mIHRoZSBvcmlnaW5hbCB6b25lICR7dGFzay56b25lLm5hbWV9YCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIG5ld1pvbmUgPSBuZXdab25lLnBhcmVudDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgKHRhc2sgYXMgYW55IGFzIFpvbmVUYXNrPGFueT4pLl90cmFuc2l0aW9uVG8oc2NoZWR1bGluZywgbm90U2NoZWR1bGVkKTtcbiAgICAgIGNvbnN0IHpvbmVEZWxlZ2F0ZXM6IFpvbmVEZWxlZ2F0ZVtdID0gW107XG4gICAgICAodGFzayBhcyBhbnkgYXMgWm9uZVRhc2s8YW55PikuX3pvbmVEZWxlZ2F0ZXMgPSB6b25lRGVsZWdhdGVzO1xuICAgICAgKHRhc2sgYXMgYW55IGFzIFpvbmVUYXNrPGFueT4pLl96b25lID0gdGhpcztcbiAgICAgIHRyeSB7XG4gICAgICAgIHRhc2sgPSB0aGlzLl96b25lRGVsZWdhdGUuc2NoZWR1bGVUYXNrKHRoaXMsIHRhc2spIGFzIFQ7XG4gICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgLy8gc2hvdWxkIHNldCB0YXNrJ3Mgc3RhdGUgdG8gdW5rbm93biB3aGVuIHNjaGVkdWxlVGFzayB0aHJvdyBlcnJvclxuICAgICAgICAvLyBiZWNhdXNlIHRoZSBlcnIgbWF5IGZyb20gcmVzY2hlZHVsZSwgc28gdGhlIGZyb21TdGF0ZSBtYXliZSBub3RTY2hlZHVsZWRcbiAgICAgICAgKHRhc2sgYXMgYW55IGFzIFpvbmVUYXNrPGFueT4pLl90cmFuc2l0aW9uVG8odW5rbm93biwgc2NoZWR1bGluZywgbm90U2NoZWR1bGVkKTtcbiAgICAgICAgLy8gVE9ETzogQEppYUxpUGFzc2lvbiwgc2hvdWxkIHdlIGNoZWNrIHRoZSByZXN1bHQgZnJvbSBoYW5kbGVFcnJvcj9cbiAgICAgICAgdGhpcy5fem9uZURlbGVnYXRlLmhhbmRsZUVycm9yKHRoaXMsIGVycik7XG4gICAgICAgIHRocm93IGVycjtcbiAgICAgIH1cbiAgICAgIGlmICgodGFzayBhcyBhbnkgYXMgWm9uZVRhc2s8YW55PikuX3pvbmVEZWxlZ2F0ZXMgPT09IHpvbmVEZWxlZ2F0ZXMpIHtcbiAgICAgICAgLy8gd2UgaGF2ZSB0byBjaGVjayBiZWNhdXNlIGludGVybmFsbHkgdGhlIGRlbGVnYXRlIGNhbiByZXNjaGVkdWxlIHRoZSB0YXNrLlxuICAgICAgICB0aGlzLl91cGRhdGVUYXNrQ291bnQodGFzayBhcyBhbnkgYXMgWm9uZVRhc2s8YW55PiwgMSk7XG4gICAgICB9XG4gICAgICBpZiAoKHRhc2sgYXMgYW55IGFzIFpvbmVUYXNrPGFueT4pLnN0YXRlID09IHNjaGVkdWxpbmcpIHtcbiAgICAgICAgKHRhc2sgYXMgYW55IGFzIFpvbmVUYXNrPGFueT4pLl90cmFuc2l0aW9uVG8oc2NoZWR1bGVkLCBzY2hlZHVsaW5nKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB0YXNrO1xuICAgIH1cblxuICAgIHNjaGVkdWxlTWljcm9UYXNrKFxuICAgICAgICBzb3VyY2U6IHN0cmluZywgY2FsbGJhY2s6IEZ1bmN0aW9uLCBkYXRhPzogVGFza0RhdGEsXG4gICAgICAgIGN1c3RvbVNjaGVkdWxlPzogKHRhc2s6IFRhc2spID0+IHZvaWQpOiBNaWNyb1Rhc2sge1xuICAgICAgcmV0dXJuIHRoaXMuc2NoZWR1bGVUYXNrKFxuICAgICAgICAgIG5ldyBab25lVGFzayhtaWNyb1Rhc2ssIHNvdXJjZSwgY2FsbGJhY2ssIGRhdGEsIGN1c3RvbVNjaGVkdWxlLCB1bmRlZmluZWQpKTtcbiAgICB9XG5cbiAgICBzY2hlZHVsZU1hY3JvVGFzayhcbiAgICAgICAgc291cmNlOiBzdHJpbmcsIGNhbGxiYWNrOiBGdW5jdGlvbiwgZGF0YT86IFRhc2tEYXRhLCBjdXN0b21TY2hlZHVsZT86ICh0YXNrOiBUYXNrKSA9PiB2b2lkLFxuICAgICAgICBjdXN0b21DYW5jZWw/OiAodGFzazogVGFzaykgPT4gdm9pZCk6IE1hY3JvVGFzayB7XG4gICAgICByZXR1cm4gdGhpcy5zY2hlZHVsZVRhc2soXG4gICAgICAgICAgbmV3IFpvbmVUYXNrKG1hY3JvVGFzaywgc291cmNlLCBjYWxsYmFjaywgZGF0YSwgY3VzdG9tU2NoZWR1bGUsIGN1c3RvbUNhbmNlbCkpO1xuICAgIH1cblxuICAgIHNjaGVkdWxlRXZlbnRUYXNrKFxuICAgICAgICBzb3VyY2U6IHN0cmluZywgY2FsbGJhY2s6IEZ1bmN0aW9uLCBkYXRhPzogVGFza0RhdGEsIGN1c3RvbVNjaGVkdWxlPzogKHRhc2s6IFRhc2spID0+IHZvaWQsXG4gICAgICAgIGN1c3RvbUNhbmNlbD86ICh0YXNrOiBUYXNrKSA9PiB2b2lkKTogRXZlbnRUYXNrIHtcbiAgICAgIHJldHVybiB0aGlzLnNjaGVkdWxlVGFzayhcbiAgICAgICAgICBuZXcgWm9uZVRhc2soZXZlbnRUYXNrLCBzb3VyY2UsIGNhbGxiYWNrLCBkYXRhLCBjdXN0b21TY2hlZHVsZSwgY3VzdG9tQ2FuY2VsKSk7XG4gICAgfVxuXG4gICAgY2FuY2VsVGFzayh0YXNrOiBUYXNrKTogYW55IHtcbiAgICAgIGlmICh0YXNrLnpvbmUgIT0gdGhpcylcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICAgICAgJ0EgdGFzayBjYW4gb25seSBiZSBjYW5jZWxsZWQgaW4gdGhlIHpvbmUgb2YgY3JlYXRpb24hIChDcmVhdGlvbjogJyArXG4gICAgICAgICAgICAodGFzay56b25lIHx8IE5PX1pPTkUpLm5hbWUgKyAnOyBFeGVjdXRpb246ICcgKyB0aGlzLm5hbWUgKyAnKScpO1xuICAgICAgKHRhc2sgYXMgWm9uZVRhc2s8YW55PikuX3RyYW5zaXRpb25UbyhjYW5jZWxpbmcsIHNjaGVkdWxlZCwgcnVubmluZyk7XG4gICAgICB0cnkge1xuICAgICAgICB0aGlzLl96b25lRGVsZWdhdGUuY2FuY2VsVGFzayh0aGlzLCB0YXNrKTtcbiAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAvLyBpZiBlcnJvciBvY2N1cnMgd2hlbiBjYW5jZWxUYXNrLCB0cmFuc2l0IHRoZSBzdGF0ZSB0byB1bmtub3duXG4gICAgICAgICh0YXNrIGFzIFpvbmVUYXNrPGFueT4pLl90cmFuc2l0aW9uVG8odW5rbm93biwgY2FuY2VsaW5nKTtcbiAgICAgICAgdGhpcy5fem9uZURlbGVnYXRlLmhhbmRsZUVycm9yKHRoaXMsIGVycik7XG4gICAgICAgIHRocm93IGVycjtcbiAgICAgIH1cbiAgICAgIHRoaXMuX3VwZGF0ZVRhc2tDb3VudCh0YXNrIGFzIFpvbmVUYXNrPGFueT4sIC0xKTtcbiAgICAgICh0YXNrIGFzIFpvbmVUYXNrPGFueT4pLl90cmFuc2l0aW9uVG8obm90U2NoZWR1bGVkLCBjYW5jZWxpbmcpO1xuICAgICAgdGFzay5ydW5Db3VudCA9IDA7XG4gICAgICByZXR1cm4gdGFzaztcbiAgICB9XG5cbiAgICBwcml2YXRlIF91cGRhdGVUYXNrQ291bnQodGFzazogWm9uZVRhc2s8YW55PiwgY291bnQ6IG51bWJlcikge1xuICAgICAgY29uc3Qgem9uZURlbGVnYXRlcyA9IHRhc2suX3pvbmVEZWxlZ2F0ZXMgITtcbiAgICAgIGlmIChjb3VudCA9PSAtMSkge1xuICAgICAgICB0YXNrLl96b25lRGVsZWdhdGVzID0gbnVsbDtcbiAgICAgIH1cbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgem9uZURlbGVnYXRlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICB6b25lRGVsZWdhdGVzW2ldLl91cGRhdGVUYXNrQ291bnQodGFzay50eXBlLCBjb3VudCk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgY29uc3QgREVMRUdBVEVfWlM6IFpvbmVTcGVjID0ge1xuICAgIG5hbWU6ICcnLFxuICAgIG9uSGFzVGFzazogKGRlbGVnYXRlOiBBbWJpZW50Wm9uZURlbGVnYXRlLCBfOiBBbWJpZW50Wm9uZSwgdGFyZ2V0OiBBbWJpZW50Wm9uZSxcbiAgICAgICAgICAgICAgICBoYXNUYXNrU3RhdGU6IEhhc1Rhc2tTdGF0ZSk6IHZvaWQgPT4gZGVsZWdhdGUuaGFzVGFzayh0YXJnZXQsIGhhc1Rhc2tTdGF0ZSksXG4gICAgb25TY2hlZHVsZVRhc2s6IChkZWxlZ2F0ZTogQW1iaWVudFpvbmVEZWxlZ2F0ZSwgXzogQW1iaWVudFpvbmUsIHRhcmdldDogQW1iaWVudFpvbmUsXG4gICAgICAgICAgICAgICAgICAgICB0YXNrOiBUYXNrKTogVGFzayA9PiBkZWxlZ2F0ZS5zY2hlZHVsZVRhc2sodGFyZ2V0LCB0YXNrKSxcbiAgICBvbkludm9rZVRhc2s6IChkZWxlZ2F0ZTogQW1iaWVudFpvbmVEZWxlZ2F0ZSwgXzogQW1iaWVudFpvbmUsIHRhcmdldDogQW1iaWVudFpvbmUsIHRhc2s6IFRhc2ssXG4gICAgICAgICAgICAgICAgICAgYXBwbHlUaGlzOiBhbnksIGFwcGx5QXJnczogYW55KTogYW55ID0+XG4gICAgICAgICAgICAgICAgICAgICAgZGVsZWdhdGUuaW52b2tlVGFzayh0YXJnZXQsIHRhc2ssIGFwcGx5VGhpcywgYXBwbHlBcmdzKSxcbiAgICBvbkNhbmNlbFRhc2s6IChkZWxlZ2F0ZTogQW1iaWVudFpvbmVEZWxlZ2F0ZSwgXzogQW1iaWVudFpvbmUsIHRhcmdldDogQW1iaWVudFpvbmUsIHRhc2s6IFRhc2spOlxuICAgICAgICAgICAgICAgICAgICAgIGFueSA9PiBkZWxlZ2F0ZS5jYW5jZWxUYXNrKHRhcmdldCwgdGFzaylcbiAgfTtcblxuICBjbGFzcyBab25lRGVsZWdhdGUgaW1wbGVtZW50cyBBbWJpZW50Wm9uZURlbGVnYXRlIHtcbiAgICBwdWJsaWMgem9uZTogWm9uZTtcblxuICAgIHByaXZhdGUgX3Rhc2tDb3VudHM6IHttaWNyb1Rhc2s6IG51bWJlcixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgbWFjcm9UYXNrOiBudW1iZXIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50VGFzazogbnVtYmVyfSA9IHsnbWljcm9UYXNrJzogMCwgJ21hY3JvVGFzayc6IDAsICdldmVudFRhc2snOiAwfTtcblxuICAgIHByaXZhdGUgX3BhcmVudERlbGVnYXRlOiBab25lRGVsZWdhdGV8bnVsbDtcblxuICAgIHByaXZhdGUgX2ZvcmtEbGd0OiBab25lRGVsZWdhdGV8bnVsbDtcbiAgICBwcml2YXRlIF9mb3JrWlM6IFpvbmVTcGVjfG51bGw7XG4gICAgcHJpdmF0ZSBfZm9ya0N1cnJab25lOiBab25lfG51bGw7XG5cbiAgICBwcml2YXRlIF9pbnRlcmNlcHREbGd0OiBab25lRGVsZWdhdGV8bnVsbDtcbiAgICBwcml2YXRlIF9pbnRlcmNlcHRaUzogWm9uZVNwZWN8bnVsbDtcbiAgICBwcml2YXRlIF9pbnRlcmNlcHRDdXJyWm9uZTogWm9uZXxudWxsO1xuXG4gICAgcHJpdmF0ZSBfaW52b2tlRGxndDogWm9uZURlbGVnYXRlfG51bGw7XG4gICAgcHJpdmF0ZSBfaW52b2tlWlM6IFpvbmVTcGVjfG51bGw7XG4gICAgcHJpdmF0ZSBfaW52b2tlQ3VyclpvbmU6IFpvbmV8bnVsbDtcblxuICAgIHByaXZhdGUgX2hhbmRsZUVycm9yRGxndDogWm9uZURlbGVnYXRlfG51bGw7XG4gICAgcHJpdmF0ZSBfaGFuZGxlRXJyb3JaUzogWm9uZVNwZWN8bnVsbDtcbiAgICBwcml2YXRlIF9oYW5kbGVFcnJvckN1cnJab25lOiBab25lfG51bGw7XG5cbiAgICBwcml2YXRlIF9zY2hlZHVsZVRhc2tEbGd0OiBab25lRGVsZWdhdGV8bnVsbDtcbiAgICBwcml2YXRlIF9zY2hlZHVsZVRhc2taUzogWm9uZVNwZWN8bnVsbDtcbiAgICBwcml2YXRlIF9zY2hlZHVsZVRhc2tDdXJyWm9uZTogWm9uZXxudWxsO1xuXG4gICAgcHJpdmF0ZSBfaW52b2tlVGFza0RsZ3Q6IFpvbmVEZWxlZ2F0ZXxudWxsO1xuICAgIHByaXZhdGUgX2ludm9rZVRhc2taUzogWm9uZVNwZWN8bnVsbDtcbiAgICBwcml2YXRlIF9pbnZva2VUYXNrQ3VyclpvbmU6IFpvbmV8bnVsbDtcblxuICAgIHByaXZhdGUgX2NhbmNlbFRhc2tEbGd0OiBab25lRGVsZWdhdGV8bnVsbDtcbiAgICBwcml2YXRlIF9jYW5jZWxUYXNrWlM6IFpvbmVTcGVjfG51bGw7XG4gICAgcHJpdmF0ZSBfY2FuY2VsVGFza0N1cnJab25lOiBab25lfG51bGw7XG5cbiAgICBwcml2YXRlIF9oYXNUYXNrRGxndDogWm9uZURlbGVnYXRlfG51bGw7XG4gICAgcHJpdmF0ZSBfaGFzVGFza0RsZ3RPd25lcjogWm9uZURlbGVnYXRlfG51bGw7XG4gICAgcHJpdmF0ZSBfaGFzVGFza1pTOiBab25lU3BlY3xudWxsO1xuICAgIHByaXZhdGUgX2hhc1Rhc2tDdXJyWm9uZTogWm9uZXxudWxsO1xuXG4gICAgY29uc3RydWN0b3Ioem9uZTogWm9uZSwgcGFyZW50RGVsZWdhdGU6IFpvbmVEZWxlZ2F0ZXxudWxsLCB6b25lU3BlYzogWm9uZVNwZWN8bnVsbCkge1xuICAgICAgdGhpcy56b25lID0gem9uZTtcbiAgICAgIHRoaXMuX3BhcmVudERlbGVnYXRlID0gcGFyZW50RGVsZWdhdGU7XG5cbiAgICAgIHRoaXMuX2ZvcmtaUyA9XG4gICAgICAgICAgem9uZVNwZWMgJiYgKHpvbmVTcGVjICYmIHpvbmVTcGVjLm9uRm9yayA/IHpvbmVTcGVjIDogcGFyZW50RGVsZWdhdGUgIS5fZm9ya1pTKTtcbiAgICAgIHRoaXMuX2ZvcmtEbGd0ID0gem9uZVNwZWMgJiYgKHpvbmVTcGVjLm9uRm9yayA/IHBhcmVudERlbGVnYXRlIDogcGFyZW50RGVsZWdhdGUgIS5fZm9ya0RsZ3QpO1xuICAgICAgdGhpcy5fZm9ya0N1cnJab25lID1cbiAgICAgICAgICB6b25lU3BlYyAmJiAoem9uZVNwZWMub25Gb3JrID8gdGhpcy56b25lIDogcGFyZW50RGVsZWdhdGUgIS5fZm9ya0N1cnJab25lKTtcblxuICAgICAgdGhpcy5faW50ZXJjZXB0WlMgPVxuICAgICAgICAgIHpvbmVTcGVjICYmICh6b25lU3BlYy5vbkludGVyY2VwdCA/IHpvbmVTcGVjIDogcGFyZW50RGVsZWdhdGUgIS5faW50ZXJjZXB0WlMpO1xuICAgICAgdGhpcy5faW50ZXJjZXB0RGxndCA9XG4gICAgICAgICAgem9uZVNwZWMgJiYgKHpvbmVTcGVjLm9uSW50ZXJjZXB0ID8gcGFyZW50RGVsZWdhdGUgOiBwYXJlbnREZWxlZ2F0ZSAhLl9pbnRlcmNlcHREbGd0KTtcbiAgICAgIHRoaXMuX2ludGVyY2VwdEN1cnJab25lID1cbiAgICAgICAgICB6b25lU3BlYyAmJiAoem9uZVNwZWMub25JbnRlcmNlcHQgPyB0aGlzLnpvbmUgOiBwYXJlbnREZWxlZ2F0ZSAhLl9pbnRlcmNlcHRDdXJyWm9uZSk7XG5cbiAgICAgIHRoaXMuX2ludm9rZVpTID0gem9uZVNwZWMgJiYgKHpvbmVTcGVjLm9uSW52b2tlID8gem9uZVNwZWMgOiBwYXJlbnREZWxlZ2F0ZSAhLl9pbnZva2VaUyk7XG4gICAgICB0aGlzLl9pbnZva2VEbGd0ID1cbiAgICAgICAgICB6b25lU3BlYyAmJiAoem9uZVNwZWMub25JbnZva2UgPyBwYXJlbnREZWxlZ2F0ZSAhIDogcGFyZW50RGVsZWdhdGUgIS5faW52b2tlRGxndCk7XG4gICAgICB0aGlzLl9pbnZva2VDdXJyWm9uZSA9XG4gICAgICAgICAgem9uZVNwZWMgJiYgKHpvbmVTcGVjLm9uSW52b2tlID8gdGhpcy56b25lIDogcGFyZW50RGVsZWdhdGUgIS5faW52b2tlQ3VyclpvbmUpO1xuXG4gICAgICB0aGlzLl9oYW5kbGVFcnJvclpTID1cbiAgICAgICAgICB6b25lU3BlYyAmJiAoem9uZVNwZWMub25IYW5kbGVFcnJvciA/IHpvbmVTcGVjIDogcGFyZW50RGVsZWdhdGUgIS5faGFuZGxlRXJyb3JaUyk7XG4gICAgICB0aGlzLl9oYW5kbGVFcnJvckRsZ3QgPSB6b25lU3BlYyAmJlxuICAgICAgICAgICh6b25lU3BlYy5vbkhhbmRsZUVycm9yID8gcGFyZW50RGVsZWdhdGUgISA6IHBhcmVudERlbGVnYXRlICEuX2hhbmRsZUVycm9yRGxndCk7XG4gICAgICB0aGlzLl9oYW5kbGVFcnJvckN1cnJab25lID1cbiAgICAgICAgICB6b25lU3BlYyAmJiAoem9uZVNwZWMub25IYW5kbGVFcnJvciA/IHRoaXMuem9uZSA6IHBhcmVudERlbGVnYXRlICEuX2hhbmRsZUVycm9yQ3VyclpvbmUpO1xuXG4gICAgICB0aGlzLl9zY2hlZHVsZVRhc2taUyA9XG4gICAgICAgICAgem9uZVNwZWMgJiYgKHpvbmVTcGVjLm9uU2NoZWR1bGVUYXNrID8gem9uZVNwZWMgOiBwYXJlbnREZWxlZ2F0ZSAhLl9zY2hlZHVsZVRhc2taUyk7XG4gICAgICB0aGlzLl9zY2hlZHVsZVRhc2tEbGd0ID0gem9uZVNwZWMgJiZcbiAgICAgICAgICAoem9uZVNwZWMub25TY2hlZHVsZVRhc2sgPyBwYXJlbnREZWxlZ2F0ZSAhIDogcGFyZW50RGVsZWdhdGUgIS5fc2NoZWR1bGVUYXNrRGxndCk7XG4gICAgICB0aGlzLl9zY2hlZHVsZVRhc2tDdXJyWm9uZSA9IHpvbmVTcGVjICYmXG4gICAgICAgICAgKHpvbmVTcGVjLm9uU2NoZWR1bGVUYXNrID8gdGhpcy56b25lIDogcGFyZW50RGVsZWdhdGUgIS5fc2NoZWR1bGVUYXNrQ3VyclpvbmUpO1xuXG4gICAgICB0aGlzLl9pbnZva2VUYXNrWlMgPVxuICAgICAgICAgIHpvbmVTcGVjICYmICh6b25lU3BlYy5vbkludm9rZVRhc2sgPyB6b25lU3BlYyA6IHBhcmVudERlbGVnYXRlICEuX2ludm9rZVRhc2taUyk7XG4gICAgICB0aGlzLl9pbnZva2VUYXNrRGxndCA9XG4gICAgICAgICAgem9uZVNwZWMgJiYgKHpvbmVTcGVjLm9uSW52b2tlVGFzayA/IHBhcmVudERlbGVnYXRlICEgOiBwYXJlbnREZWxlZ2F0ZSAhLl9pbnZva2VUYXNrRGxndCk7XG4gICAgICB0aGlzLl9pbnZva2VUYXNrQ3VyclpvbmUgPVxuICAgICAgICAgIHpvbmVTcGVjICYmICh6b25lU3BlYy5vbkludm9rZVRhc2sgPyB0aGlzLnpvbmUgOiBwYXJlbnREZWxlZ2F0ZSAhLl9pbnZva2VUYXNrQ3VyclpvbmUpO1xuXG4gICAgICB0aGlzLl9jYW5jZWxUYXNrWlMgPVxuICAgICAgICAgIHpvbmVTcGVjICYmICh6b25lU3BlYy5vbkNhbmNlbFRhc2sgPyB6b25lU3BlYyA6IHBhcmVudERlbGVnYXRlICEuX2NhbmNlbFRhc2taUyk7XG4gICAgICB0aGlzLl9jYW5jZWxUYXNrRGxndCA9XG4gICAgICAgICAgem9uZVNwZWMgJiYgKHpvbmVTcGVjLm9uQ2FuY2VsVGFzayA/IHBhcmVudERlbGVnYXRlICEgOiBwYXJlbnREZWxlZ2F0ZSAhLl9jYW5jZWxUYXNrRGxndCk7XG4gICAgICB0aGlzLl9jYW5jZWxUYXNrQ3VyclpvbmUgPVxuICAgICAgICAgIHpvbmVTcGVjICYmICh6b25lU3BlYy5vbkNhbmNlbFRhc2sgPyB0aGlzLnpvbmUgOiBwYXJlbnREZWxlZ2F0ZSAhLl9jYW5jZWxUYXNrQ3VyclpvbmUpO1xuXG4gICAgICB0aGlzLl9oYXNUYXNrWlMgPSBudWxsO1xuICAgICAgdGhpcy5faGFzVGFza0RsZ3QgPSBudWxsO1xuICAgICAgdGhpcy5faGFzVGFza0RsZ3RPd25lciA9IG51bGw7XG4gICAgICB0aGlzLl9oYXNUYXNrQ3VyclpvbmUgPSBudWxsO1xuXG4gICAgICBjb25zdCB6b25lU3BlY0hhc1Rhc2sgPSB6b25lU3BlYyAmJiB6b25lU3BlYy5vbkhhc1Rhc2s7XG4gICAgICBjb25zdCBwYXJlbnRIYXNUYXNrID0gcGFyZW50RGVsZWdhdGUgJiYgcGFyZW50RGVsZWdhdGUuX2hhc1Rhc2taUztcbiAgICAgIGlmICh6b25lU3BlY0hhc1Rhc2sgfHwgcGFyZW50SGFzVGFzaykge1xuICAgICAgICAvLyBJZiB3ZSBuZWVkIHRvIHJlcG9ydCBoYXNUYXNrLCB0aGFuIHRoaXMgWlMgbmVlZHMgdG8gZG8gcmVmIGNvdW50aW5nIG9uIHRhc2tzLiBJbiBzdWNoXG4gICAgICAgIC8vIGEgY2FzZSBhbGwgdGFzayByZWxhdGVkIGludGVyY2VwdG9ycyBtdXN0IGdvIHRocm91Z2ggdGhpcyBaRC4gV2UgY2FuJ3Qgc2hvcnQgY2lyY3VpdCBpdC5cbiAgICAgICAgdGhpcy5faGFzVGFza1pTID0gem9uZVNwZWNIYXNUYXNrID8gem9uZVNwZWMgOiBERUxFR0FURV9aUztcbiAgICAgICAgdGhpcy5faGFzVGFza0RsZ3QgPSBwYXJlbnREZWxlZ2F0ZTtcbiAgICAgICAgdGhpcy5faGFzVGFza0RsZ3RPd25lciA9IHRoaXM7XG4gICAgICAgIHRoaXMuX2hhc1Rhc2tDdXJyWm9uZSA9IHpvbmU7XG4gICAgICAgIGlmICghem9uZVNwZWMgIS5vblNjaGVkdWxlVGFzaykge1xuICAgICAgICAgIHRoaXMuX3NjaGVkdWxlVGFza1pTID0gREVMRUdBVEVfWlM7XG4gICAgICAgICAgdGhpcy5fc2NoZWR1bGVUYXNrRGxndCA9IHBhcmVudERlbGVnYXRlICE7XG4gICAgICAgICAgdGhpcy5fc2NoZWR1bGVUYXNrQ3VyclpvbmUgPSB0aGlzLnpvbmU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCF6b25lU3BlYyAhLm9uSW52b2tlVGFzaykge1xuICAgICAgICAgIHRoaXMuX2ludm9rZVRhc2taUyA9IERFTEVHQVRFX1pTO1xuICAgICAgICAgIHRoaXMuX2ludm9rZVRhc2tEbGd0ID0gcGFyZW50RGVsZWdhdGUgITtcbiAgICAgICAgICB0aGlzLl9pbnZva2VUYXNrQ3VyclpvbmUgPSB0aGlzLnpvbmU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCF6b25lU3BlYyAhLm9uQ2FuY2VsVGFzaykge1xuICAgICAgICAgIHRoaXMuX2NhbmNlbFRhc2taUyA9IERFTEVHQVRFX1pTO1xuICAgICAgICAgIHRoaXMuX2NhbmNlbFRhc2tEbGd0ID0gcGFyZW50RGVsZWdhdGUgITtcbiAgICAgICAgICB0aGlzLl9jYW5jZWxUYXNrQ3VyclpvbmUgPSB0aGlzLnpvbmU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBmb3JrKHRhcmdldFpvbmU6IFpvbmUsIHpvbmVTcGVjOiBab25lU3BlYyk6IEFtYmllbnRab25lIHtcbiAgICAgIHJldHVybiB0aGlzLl9mb3JrWlMgP1xuICAgICAgICAgIHRoaXMuX2ZvcmtaUy5vbkZvcmsgISh0aGlzLl9mb3JrRGxndCAhLCB0aGlzLnpvbmUsIHRhcmdldFpvbmUsIHpvbmVTcGVjKSA6XG4gICAgICAgICAgbmV3IFpvbmUodGFyZ2V0Wm9uZSwgem9uZVNwZWMpO1xuICAgIH1cblxuICAgIGludGVyY2VwdCh0YXJnZXRab25lOiBab25lLCBjYWxsYmFjazogRnVuY3Rpb24sIHNvdXJjZTogc3RyaW5nKTogRnVuY3Rpb24ge1xuICAgICAgcmV0dXJuIHRoaXMuX2ludGVyY2VwdFpTID9cbiAgICAgICAgICB0aGlzLl9pbnRlcmNlcHRaUy5vbkludGVyY2VwdCAhKFxuICAgICAgICAgICAgICB0aGlzLl9pbnRlcmNlcHREbGd0ICEsIHRoaXMuX2ludGVyY2VwdEN1cnJab25lICEsIHRhcmdldFpvbmUsIGNhbGxiYWNrLCBzb3VyY2UpIDpcbiAgICAgICAgICBjYWxsYmFjaztcbiAgICB9XG5cbiAgICBpbnZva2UoXG4gICAgICAgIHRhcmdldFpvbmU6IFpvbmUsIGNhbGxiYWNrOiBGdW5jdGlvbiwgYXBwbHlUaGlzOiBhbnksIGFwcGx5QXJncz86IGFueVtdLFxuICAgICAgICBzb3VyY2U/OiBzdHJpbmcpOiBhbnkge1xuICAgICAgcmV0dXJuIHRoaXMuX2ludm9rZVpTID9cbiAgICAgICAgICB0aGlzLl9pbnZva2VaUy5vbkludm9rZSAhKFxuICAgICAgICAgICAgICB0aGlzLl9pbnZva2VEbGd0ICEsIHRoaXMuX2ludm9rZUN1cnJab25lICEsIHRhcmdldFpvbmUsIGNhbGxiYWNrLCBhcHBseVRoaXMsXG4gICAgICAgICAgICAgIGFwcGx5QXJncywgc291cmNlKSA6XG4gICAgICAgICAgY2FsbGJhY2suYXBwbHkoYXBwbHlUaGlzLCBhcHBseUFyZ3MpO1xuICAgIH1cblxuICAgIGhhbmRsZUVycm9yKHRhcmdldFpvbmU6IFpvbmUsIGVycm9yOiBhbnkpOiBib29sZWFuIHtcbiAgICAgIHJldHVybiB0aGlzLl9oYW5kbGVFcnJvclpTID9cbiAgICAgICAgICB0aGlzLl9oYW5kbGVFcnJvclpTLm9uSGFuZGxlRXJyb3IgIShcbiAgICAgICAgICAgICAgdGhpcy5faGFuZGxlRXJyb3JEbGd0ICEsIHRoaXMuX2hhbmRsZUVycm9yQ3VyclpvbmUgISwgdGFyZ2V0Wm9uZSwgZXJyb3IpIDpcbiAgICAgICAgICB0cnVlO1xuICAgIH1cblxuICAgIHNjaGVkdWxlVGFzayh0YXJnZXRab25lOiBab25lLCB0YXNrOiBUYXNrKTogVGFzayB7XG4gICAgICBsZXQgcmV0dXJuVGFzazogWm9uZVRhc2s8YW55PiA9IHRhc2sgYXMgWm9uZVRhc2s8YW55PjtcbiAgICAgIGlmICh0aGlzLl9zY2hlZHVsZVRhc2taUykge1xuICAgICAgICBpZiAodGhpcy5faGFzVGFza1pTKSB7XG4gICAgICAgICAgcmV0dXJuVGFzay5fem9uZURlbGVnYXRlcyAhLnB1c2godGhpcy5faGFzVGFza0RsZ3RPd25lciAhKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBjbGFuZy1mb3JtYXQgb2ZmXG4gICAgICAgIHJldHVyblRhc2sgPSB0aGlzLl9zY2hlZHVsZVRhc2taUy5vblNjaGVkdWxlVGFzayAhKFxuICAgICAgICAgICAgdGhpcy5fc2NoZWR1bGVUYXNrRGxndCAhLCB0aGlzLl9zY2hlZHVsZVRhc2tDdXJyWm9uZSAhLCB0YXJnZXRab25lLCB0YXNrKSBhcyBab25lVGFzazxhbnk+O1xuICAgICAgICAvLyBjbGFuZy1mb3JtYXQgb25cbiAgICAgICAgaWYgKCFyZXR1cm5UYXNrKSByZXR1cm5UYXNrID0gdGFzayBhcyBab25lVGFzazxhbnk+O1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKHRhc2suc2NoZWR1bGVGbikge1xuICAgICAgICAgIHRhc2suc2NoZWR1bGVGbih0YXNrKTtcbiAgICAgICAgfSBlbHNlIGlmICh0YXNrLnR5cGUgPT0gbWljcm9UYXNrKSB7XG4gICAgICAgICAgc2NoZWR1bGVNaWNyb1Rhc2soPE1pY3JvVGFzaz50YXNrKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1Rhc2sgaXMgbWlzc2luZyBzY2hlZHVsZUZuLicpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gcmV0dXJuVGFzaztcbiAgICB9XG5cbiAgICBpbnZva2VUYXNrKHRhcmdldFpvbmU6IFpvbmUsIHRhc2s6IFRhc2ssIGFwcGx5VGhpczogYW55LCBhcHBseUFyZ3M/OiBhbnlbXSk6IGFueSB7XG4gICAgICByZXR1cm4gdGhpcy5faW52b2tlVGFza1pTID9cbiAgICAgICAgICB0aGlzLl9pbnZva2VUYXNrWlMub25JbnZva2VUYXNrICEoXG4gICAgICAgICAgICAgIHRoaXMuX2ludm9rZVRhc2tEbGd0ICEsIHRoaXMuX2ludm9rZVRhc2tDdXJyWm9uZSAhLCB0YXJnZXRab25lLCB0YXNrLCBhcHBseVRoaXMsXG4gICAgICAgICAgICAgIGFwcGx5QXJncykgOlxuICAgICAgICAgIHRhc2suY2FsbGJhY2suYXBwbHkoYXBwbHlUaGlzLCBhcHBseUFyZ3MpO1xuICAgIH1cblxuICAgIGNhbmNlbFRhc2sodGFyZ2V0Wm9uZTogWm9uZSwgdGFzazogVGFzayk6IGFueSB7XG4gICAgICBsZXQgdmFsdWU6IGFueTtcbiAgICAgIGlmICh0aGlzLl9jYW5jZWxUYXNrWlMpIHtcbiAgICAgICAgdmFsdWUgPSB0aGlzLl9jYW5jZWxUYXNrWlMub25DYW5jZWxUYXNrICEoXG4gICAgICAgICAgICB0aGlzLl9jYW5jZWxUYXNrRGxndCAhLCB0aGlzLl9jYW5jZWxUYXNrQ3VyclpvbmUgISwgdGFyZ2V0Wm9uZSwgdGFzayk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpZiAoIXRhc2suY2FuY2VsRm4pIHtcbiAgICAgICAgICB0aHJvdyBFcnJvcignVGFzayBpcyBub3QgY2FuY2VsYWJsZScpO1xuICAgICAgICB9XG4gICAgICAgIHZhbHVlID0gdGFzay5jYW5jZWxGbih0YXNrKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9XG5cbiAgICBoYXNUYXNrKHRhcmdldFpvbmU6IFpvbmUsIGlzRW1wdHk6IEhhc1Rhc2tTdGF0ZSkge1xuICAgICAgLy8gaGFzVGFzayBzaG91bGQgbm90IHRocm93IGVycm9yIHNvIG90aGVyIFpvbmVEZWxlZ2F0ZVxuICAgICAgLy8gY2FuIHN0aWxsIHRyaWdnZXIgaGFzVGFzayBjYWxsYmFja1xuICAgICAgdHJ5IHtcbiAgICAgICAgdGhpcy5faGFzVGFza1pTICYmXG4gICAgICAgICAgICB0aGlzLl9oYXNUYXNrWlMub25IYXNUYXNrICEoXG4gICAgICAgICAgICAgICAgdGhpcy5faGFzVGFza0RsZ3QgISwgdGhpcy5faGFzVGFza0N1cnJab25lICEsIHRhcmdldFpvbmUsIGlzRW1wdHkpO1xuICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgIHRoaXMuaGFuZGxlRXJyb3IodGFyZ2V0Wm9uZSwgZXJyKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBfdXBkYXRlVGFza0NvdW50KHR5cGU6IFRhc2tUeXBlLCBjb3VudDogbnVtYmVyKSB7XG4gICAgICBjb25zdCBjb3VudHMgPSB0aGlzLl90YXNrQ291bnRzO1xuICAgICAgY29uc3QgcHJldiA9IGNvdW50c1t0eXBlXTtcbiAgICAgIGNvbnN0IG5leHQgPSBjb3VudHNbdHlwZV0gPSBwcmV2ICsgY291bnQ7XG4gICAgICBpZiAobmV4dCA8IDApIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdNb3JlIHRhc2tzIGV4ZWN1dGVkIHRoZW4gd2VyZSBzY2hlZHVsZWQuJyk7XG4gICAgICB9XG4gICAgICBpZiAocHJldiA9PSAwIHx8IG5leHQgPT0gMCkge1xuICAgICAgICBjb25zdCBpc0VtcHR5OiBIYXNUYXNrU3RhdGUgPSB7XG4gICAgICAgICAgbWljcm9UYXNrOiBjb3VudHNbJ21pY3JvVGFzayddID4gMCxcbiAgICAgICAgICBtYWNyb1Rhc2s6IGNvdW50c1snbWFjcm9UYXNrJ10gPiAwLFxuICAgICAgICAgIGV2ZW50VGFzazogY291bnRzWydldmVudFRhc2snXSA+IDAsXG4gICAgICAgICAgY2hhbmdlOiB0eXBlXG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuaGFzVGFzayh0aGlzLnpvbmUsIGlzRW1wdHkpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGNsYXNzIFpvbmVUYXNrPFQgZXh0ZW5kcyBUYXNrVHlwZT4gaW1wbGVtZW50cyBUYXNrIHtcbiAgICBwdWJsaWMgdHlwZTogVDtcbiAgICBwdWJsaWMgc291cmNlOiBzdHJpbmc7XG4gICAgcHVibGljIGludm9rZTogRnVuY3Rpb247XG4gICAgcHVibGljIGNhbGxiYWNrOiBGdW5jdGlvbjtcbiAgICBwdWJsaWMgZGF0YTogVGFza0RhdGF8dW5kZWZpbmVkO1xuICAgIHB1YmxpYyBzY2hlZHVsZUZuOiAoKHRhc2s6IFRhc2spID0+IHZvaWQpfHVuZGVmaW5lZDtcbiAgICBwdWJsaWMgY2FuY2VsRm46ICgodGFzazogVGFzaykgPT4gdm9pZCl8dW5kZWZpbmVkO1xuICAgIF96b25lOiBab25lfG51bGwgPSBudWxsO1xuICAgIHB1YmxpYyBydW5Db3VudDogbnVtYmVyID0gMDtcbiAgICBfem9uZURlbGVnYXRlczogWm9uZURlbGVnYXRlW118bnVsbCA9IG51bGw7XG4gICAgX3N0YXRlOiBUYXNrU3RhdGUgPSAnbm90U2NoZWR1bGVkJztcblxuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICB0eXBlOiBULCBzb3VyY2U6IHN0cmluZywgY2FsbGJhY2s6IEZ1bmN0aW9uLCBvcHRpb25zOiBUYXNrRGF0YXx1bmRlZmluZWQsXG4gICAgICAgIHNjaGVkdWxlRm46ICgodGFzazogVGFzaykgPT4gdm9pZCl8dW5kZWZpbmVkLCBjYW5jZWxGbjogKCh0YXNrOiBUYXNrKSA9PiB2b2lkKXx1bmRlZmluZWQpIHtcbiAgICAgIHRoaXMudHlwZSA9IHR5cGU7XG4gICAgICB0aGlzLnNvdXJjZSA9IHNvdXJjZTtcbiAgICAgIHRoaXMuZGF0YSA9IG9wdGlvbnM7XG4gICAgICB0aGlzLnNjaGVkdWxlRm4gPSBzY2hlZHVsZUZuO1xuICAgICAgdGhpcy5jYW5jZWxGbiA9IGNhbmNlbEZuO1xuICAgICAgaWYgKCFjYWxsYmFjaykge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ2NhbGxiYWNrIGlzIG5vdCBkZWZpbmVkJyk7XG4gICAgICB9XG4gICAgICB0aGlzLmNhbGxiYWNrID0gY2FsbGJhY2s7XG4gICAgICBjb25zdCBzZWxmID0gdGhpcztcbiAgICAgIC8vIFRPRE86IEBKaWFMaVBhc3Npb24gb3B0aW9ucyBzaG91bGQgaGF2ZSBpbnRlcmZhY2VcbiAgICAgIGlmICh0eXBlID09PSBldmVudFRhc2sgJiYgb3B0aW9ucyAmJiAob3B0aW9ucyBhcyBhbnkpLnVzZUcpIHtcbiAgICAgICAgdGhpcy5pbnZva2UgPSBab25lVGFzay5pbnZva2VUYXNrO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5pbnZva2UgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICByZXR1cm4gWm9uZVRhc2suaW52b2tlVGFzay5jYWxsKGdsb2JhbCwgc2VsZiwgdGhpcywgPGFueT5hcmd1bWVudHMpO1xuICAgICAgICB9O1xuICAgICAgfVxuICAgIH1cblxuICAgIHN0YXRpYyBpbnZva2VUYXNrKHRhc2s6IGFueSwgdGFyZ2V0OiBhbnksIGFyZ3M6IGFueSk6IGFueSB7XG4gICAgICBpZiAoIXRhc2spIHtcbiAgICAgICAgdGFzayA9IHRoaXM7XG4gICAgICB9XG4gICAgICBfbnVtYmVyT2ZOZXN0ZWRUYXNrRnJhbWVzKys7XG4gICAgICB0cnkge1xuICAgICAgICB0YXNrLnJ1bkNvdW50Kys7XG4gICAgICAgIHJldHVybiB0YXNrLnpvbmUucnVuVGFzayh0YXNrLCB0YXJnZXQsIGFyZ3MpO1xuICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgaWYgKF9udW1iZXJPZk5lc3RlZFRhc2tGcmFtZXMgPT0gMSkge1xuICAgICAgICAgIGRyYWluTWljcm9UYXNrUXVldWUoKTtcbiAgICAgICAgfVxuICAgICAgICBfbnVtYmVyT2ZOZXN0ZWRUYXNrRnJhbWVzLS07XG4gICAgICB9XG4gICAgfVxuXG4gICAgZ2V0IHpvbmUoKTogWm9uZSB7IHJldHVybiB0aGlzLl96b25lICE7IH1cblxuICAgIGdldCBzdGF0ZSgpOiBUYXNrU3RhdGUgeyByZXR1cm4gdGhpcy5fc3RhdGU7IH1cblxuICAgIHB1YmxpYyBjYW5jZWxTY2hlZHVsZVJlcXVlc3QoKSB7IHRoaXMuX3RyYW5zaXRpb25Ubyhub3RTY2hlZHVsZWQsIHNjaGVkdWxpbmcpOyB9XG5cbiAgICBfdHJhbnNpdGlvblRvKHRvU3RhdGU6IFRhc2tTdGF0ZSwgZnJvbVN0YXRlMTogVGFza1N0YXRlLCBmcm9tU3RhdGUyPzogVGFza1N0YXRlKSB7XG4gICAgICBpZiAodGhpcy5fc3RhdGUgPT09IGZyb21TdGF0ZTEgfHwgdGhpcy5fc3RhdGUgPT09IGZyb21TdGF0ZTIpIHtcbiAgICAgICAgdGhpcy5fc3RhdGUgPSB0b1N0YXRlO1xuICAgICAgICBpZiAodG9TdGF0ZSA9PSBub3RTY2hlZHVsZWQpIHtcbiAgICAgICAgICB0aGlzLl96b25lRGVsZWdhdGVzID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGAke3RoaXMudHlwZX0gJyR7dGhpcy5zb3VyY2V9JzogY2FuIG5vdCB0cmFuc2l0aW9uIHRvICcke1xuICAgICAgICAgICAgdG9TdGF0ZX0nLCBleHBlY3Rpbmcgc3RhdGUgJyR7ZnJvbVN0YXRlMX0nJHtcbiAgICAgICAgICAgIGZyb21TdGF0ZTIgPyAnIG9yIFxcJycgKyBmcm9tU3RhdGUyICsgJ1xcJycgOiAnJ30sIHdhcyAnJHt0aGlzLl9zdGF0ZX0nLmApO1xuICAgICAgfVxuICAgIH1cblxuICAgIHB1YmxpYyB0b1N0cmluZygpIHtcbiAgICAgIGlmICh0aGlzLmRhdGEgJiYgdHlwZW9mIHRoaXMuZGF0YS5oYW5kbGVJZCAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZGF0YS5oYW5kbGVJZC50b1N0cmluZygpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh0aGlzKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBhZGQgdG9KU09OIG1ldGhvZCB0byBwcmV2ZW50IGN5Y2xpYyBlcnJvciB3aGVuXG4gICAgLy8gY2FsbCBKU09OLnN0cmluZ2lmeSh6b25lVGFzaylcbiAgICBwdWJsaWMgdG9KU09OKCkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgdHlwZTogdGhpcy50eXBlLFxuICAgICAgICBzdGF0ZTogdGhpcy5zdGF0ZSxcbiAgICAgICAgc291cmNlOiB0aGlzLnNvdXJjZSxcbiAgICAgICAgem9uZTogdGhpcy56b25lLm5hbWUsXG4gICAgICAgIHJ1bkNvdW50OiB0aGlzLnJ1bkNvdW50XG4gICAgICB9O1xuICAgIH1cbiAgfVxuXG5cbiAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG4gIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuICAvLy8gIE1JQ1JPVEFTSyBRVUVVRVxuICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cbiAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG4gIGNvbnN0IHN5bWJvbFNldFRpbWVvdXQgPSBfX3N5bWJvbF9fKCdzZXRUaW1lb3V0Jyk7XG4gIGNvbnN0IHN5bWJvbFByb21pc2UgPSBfX3N5bWJvbF9fKCdQcm9taXNlJyk7XG4gIGNvbnN0IHN5bWJvbFRoZW4gPSBfX3N5bWJvbF9fKCd0aGVuJyk7XG4gIGxldCBfbWljcm9UYXNrUXVldWU6IFRhc2tbXSA9IFtdO1xuICBsZXQgX2lzRHJhaW5pbmdNaWNyb3Rhc2tRdWV1ZTogYm9vbGVhbiA9IGZhbHNlO1xuICBsZXQgbmF0aXZlTWljcm9UYXNrUXVldWVQcm9taXNlOiBhbnk7XG5cbiAgZnVuY3Rpb24gc2NoZWR1bGVNaWNyb1Rhc2sodGFzaz86IE1pY3JvVGFzaykge1xuICAgIC8vIGlmIHdlIGFyZSBub3QgcnVubmluZyBpbiBhbnkgdGFzaywgYW5kIHRoZXJlIGhhcyBub3QgYmVlbiBhbnl0aGluZyBzY2hlZHVsZWRcbiAgICAvLyB3ZSBtdXN0IGJvb3RzdHJhcCB0aGUgaW5pdGlhbCB0YXNrIGNyZWF0aW9uIGJ5IG1hbnVhbGx5IHNjaGVkdWxpbmcgdGhlIGRyYWluXG4gICAgaWYgKF9udW1iZXJPZk5lc3RlZFRhc2tGcmFtZXMgPT09IDAgJiYgX21pY3JvVGFza1F1ZXVlLmxlbmd0aCA9PT0gMCkge1xuICAgICAgLy8gV2UgYXJlIG5vdCBydW5uaW5nIGluIFRhc2ssIHNvIHdlIG5lZWQgdG8ga2lja3N0YXJ0IHRoZSBtaWNyb3Rhc2sgcXVldWUuXG4gICAgICBpZiAoIW5hdGl2ZU1pY3JvVGFza1F1ZXVlUHJvbWlzZSkge1xuICAgICAgICBpZiAoZ2xvYmFsW3N5bWJvbFByb21pc2VdKSB7XG4gICAgICAgICAgbmF0aXZlTWljcm9UYXNrUXVldWVQcm9taXNlID0gZ2xvYmFsW3N5bWJvbFByb21pc2VdLnJlc29sdmUoMCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmIChuYXRpdmVNaWNyb1Rhc2tRdWV1ZVByb21pc2UpIHtcbiAgICAgICAgbGV0IG5hdGl2ZVRoZW4gPSBuYXRpdmVNaWNyb1Rhc2tRdWV1ZVByb21pc2Vbc3ltYm9sVGhlbl07XG4gICAgICAgIGlmICghbmF0aXZlVGhlbikge1xuICAgICAgICAgIC8vIG5hdGl2ZSBQcm9taXNlIGlzIG5vdCBwYXRjaGFibGUsIHdlIG5lZWQgdG8gdXNlIGB0aGVuYCBkaXJlY3RseVxuICAgICAgICAgIC8vIGlzc3VlIDEwNzhcbiAgICAgICAgICBuYXRpdmVUaGVuID0gbmF0aXZlTWljcm9UYXNrUXVldWVQcm9taXNlWyd0aGVuJ107XG4gICAgICAgIH1cbiAgICAgICAgbmF0aXZlVGhlbi5jYWxsKG5hdGl2ZU1pY3JvVGFza1F1ZXVlUHJvbWlzZSwgZHJhaW5NaWNyb1Rhc2tRdWV1ZSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBnbG9iYWxbc3ltYm9sU2V0VGltZW91dF0oZHJhaW5NaWNyb1Rhc2tRdWV1ZSwgMCk7XG4gICAgICB9XG4gICAgfVxuICAgIHRhc2sgJiYgX21pY3JvVGFza1F1ZXVlLnB1c2godGFzayk7XG4gIH1cblxuICBmdW5jdGlvbiBkcmFpbk1pY3JvVGFza1F1ZXVlKCkge1xuICAgIGlmICghX2lzRHJhaW5pbmdNaWNyb3Rhc2tRdWV1ZSkge1xuICAgICAgX2lzRHJhaW5pbmdNaWNyb3Rhc2tRdWV1ZSA9IHRydWU7XG4gICAgICB3aGlsZSAoX21pY3JvVGFza1F1ZXVlLmxlbmd0aCkge1xuICAgICAgICBjb25zdCBxdWV1ZSA9IF9taWNyb1Rhc2tRdWV1ZTtcbiAgICAgICAgX21pY3JvVGFza1F1ZXVlID0gW107XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcXVldWUubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICBjb25zdCB0YXNrID0gcXVldWVbaV07XG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHRhc2suem9uZS5ydW5UYXNrKHRhc2ssIG51bGwsIG51bGwpO1xuICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBfYXBpLm9uVW5oYW5kbGVkRXJyb3IoZXJyb3IpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgX2FwaS5taWNyb3Rhc2tEcmFpbkRvbmUoKTtcbiAgICAgIF9pc0RyYWluaW5nTWljcm90YXNrUXVldWUgPSBmYWxzZTtcbiAgICB9XG4gIH1cblxuICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cbiAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG4gIC8vLyAgQk9PVFNUUkFQXG4gIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cblxuXG4gIGNvbnN0IE5PX1pPTkUgPSB7bmFtZTogJ05PIFpPTkUnfTtcbiAgY29uc3Qgbm90U2NoZWR1bGVkOiAnbm90U2NoZWR1bGVkJyA9ICdub3RTY2hlZHVsZWQnLCBzY2hlZHVsaW5nOiAnc2NoZWR1bGluZycgPSAnc2NoZWR1bGluZycsXG4gICAgICAgICAgICAgICAgICAgICAgc2NoZWR1bGVkOiAnc2NoZWR1bGVkJyA9ICdzY2hlZHVsZWQnLCBydW5uaW5nOiAncnVubmluZycgPSAncnVubmluZycsXG4gICAgICAgICAgICAgICAgICAgICAgY2FuY2VsaW5nOiAnY2FuY2VsaW5nJyA9ICdjYW5jZWxpbmcnLCB1bmtub3duOiAndW5rbm93bicgPSAndW5rbm93bic7XG4gIGNvbnN0IG1pY3JvVGFzazogJ21pY3JvVGFzaycgPSAnbWljcm9UYXNrJywgbWFjcm9UYXNrOiAnbWFjcm9UYXNrJyA9ICdtYWNyb1Rhc2snLFxuICAgICAgICAgICAgICAgICAgIGV2ZW50VGFzazogJ2V2ZW50VGFzaycgPSAnZXZlbnRUYXNrJztcblxuICBjb25zdCBwYXRjaGVzOiB7W2tleTogc3RyaW5nXTogYW55fSA9IHt9O1xuICBjb25zdCBfYXBpOiBfWm9uZVByaXZhdGUgPSB7XG4gICAgc3ltYm9sOiBfX3N5bWJvbF9fLFxuICAgIGN1cnJlbnRab25lRnJhbWU6ICgpID0+IF9jdXJyZW50Wm9uZUZyYW1lLFxuICAgIG9uVW5oYW5kbGVkRXJyb3I6IG5vb3AsXG4gICAgbWljcm90YXNrRHJhaW5Eb25lOiBub29wLFxuICAgIHNjaGVkdWxlTWljcm9UYXNrOiBzY2hlZHVsZU1pY3JvVGFzayxcbiAgICBzaG93VW5jYXVnaHRFcnJvcjogKCkgPT4gIShab25lIGFzIGFueSlbX19zeW1ib2xfXygnaWdub3JlQ29uc29sZUVycm9yVW5jYXVnaHRFcnJvcicpXSxcbiAgICBwYXRjaEV2ZW50VGFyZ2V0OiAoKSA9PiBbXSxcbiAgICBwYXRjaE9uUHJvcGVydGllczogbm9vcCxcbiAgICBwYXRjaE1ldGhvZDogKCkgPT4gbm9vcCxcbiAgICBiaW5kQXJndW1lbnRzOiAoKSA9PiBbXSxcbiAgICBwYXRjaFRoZW46ICgpID0+IG5vb3AsXG4gICAgcGF0Y2hNYWNyb1Rhc2s6ICgpID0+IG5vb3AsXG4gICAgc2V0TmF0aXZlUHJvbWlzZTogKE5hdGl2ZVByb21pc2U6IGFueSkgPT4ge1xuICAgICAgLy8gc29tZXRpbWVzIE5hdGl2ZVByb21pc2UucmVzb2x2ZSBzdGF0aWMgZnVuY3Rpb25cbiAgICAgIC8vIGlzIG5vdCByZWFkeSB5ZXQsIChzdWNoIGFzIGNvcmUtanMvZXM2LnByb21pc2UpXG4gICAgICAvLyBzbyB3ZSBuZWVkIHRvIGNoZWNrIGhlcmUuXG4gICAgICBpZiAoTmF0aXZlUHJvbWlzZSAmJiB0eXBlb2YgTmF0aXZlUHJvbWlzZS5yZXNvbHZlID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIG5hdGl2ZU1pY3JvVGFza1F1ZXVlUHJvbWlzZSA9IE5hdGl2ZVByb21pc2UucmVzb2x2ZSgwKTtcbiAgICAgIH1cbiAgICB9LFxuICAgIHBhdGNoRXZlbnRQcm90b3R5cGU6ICgpID0+IG5vb3AsXG4gICAgaXNJRU9yRWRnZTogKCkgPT4gZmFsc2UsXG4gICAgZ2V0R2xvYmFsT2JqZWN0czogKCkgPT4gdW5kZWZpbmVkLFxuICAgIE9iamVjdERlZmluZVByb3BlcnR5OiAoKSA9PiBub29wLFxuICAgIE9iamVjdEdldE93blByb3BlcnR5RGVzY3JpcHRvcjogKCkgPT4gdW5kZWZpbmVkLFxuICAgIE9iamVjdENyZWF0ZTogKCkgPT4gdW5kZWZpbmVkLFxuICAgIEFycmF5U2xpY2U6ICgpID0+IFtdLFxuICAgIHBhdGNoQ2xhc3M6ICgpID0+IG5vb3AsXG4gICAgd3JhcFdpdGhDdXJyZW50Wm9uZTogKCkgPT4gbm9vcCxcbiAgICBmaWx0ZXJQcm9wZXJ0aWVzOiAoKSA9PiBbXSxcbiAgICBhdHRhY2hPcmlnaW5Ub1BhdGNoZWQ6ICgpID0+IG5vb3AsXG4gICAgX3JlZGVmaW5lUHJvcGVydHk6ICgpID0+IG5vb3AsXG4gICAgcGF0Y2hDYWxsYmFja3M6ICgpID0+IG5vb3BcbiAgfTtcbiAgbGV0IF9jdXJyZW50Wm9uZUZyYW1lOiBfWm9uZUZyYW1lID0ge3BhcmVudDogbnVsbCwgem9uZTogbmV3IFpvbmUobnVsbCwgbnVsbCl9O1xuICBsZXQgX2N1cnJlbnRUYXNrOiBUYXNrfG51bGwgPSBudWxsO1xuICBsZXQgX251bWJlck9mTmVzdGVkVGFza0ZyYW1lcyA9IDA7XG5cbiAgZnVuY3Rpb24gbm9vcCgpIHt9XG5cbiAgcGVyZm9ybWFuY2VNZWFzdXJlKCdab25lJywgJ1pvbmUnKTtcbiAgcmV0dXJuIGdsb2JhbFsnWm9uZSddID0gWm9uZTtcbn0pKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnICYmIHdpbmRvdyB8fCB0eXBlb2Ygc2VsZiAhPT0gJ3VuZGVmaW5lZCcgJiYgc2VsZiB8fCBnbG9iYWwpO1xuIl19